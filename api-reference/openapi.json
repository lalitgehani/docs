{
  "openapi": "3.1.0",
  "info": {
    "title": "SnackBase",
    "description": "Open-source Backend-as-a-Service (BaaS)",
    "version": "0.1.0"
  },
  "paths": {
    "/health": {
      "get": {
        "tags": ["health"],
        "summary": "Health Check",
        "description": "Basic health check endpoint.\n\nReturns 200 if the service is running. Does not check\ndatabase connectivity or other dependencies.",
        "operationId": "health_check_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/ready": {
      "get": {
        "tags": ["health"],
        "summary": "Readiness Check",
        "description": "Readiness check endpoint.\n\nReturns 200 if the service is ready to accept requests,\nincluding database connectivity check.",
        "operationId": "readiness_check_ready_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/live": {
      "get": {
        "tags": ["health"],
        "summary": "Liveness Check",
        "description": "Liveness check endpoint.\n\nReturns 200 if the service is alive. This is a simple check\nthat the service is running and responding to requests.",
        "operationId": "liveness_check_live_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/register": {
      "post": {
        "tags": ["auth"],
        "summary": "Register",
        "description": "Register a new account and user.\n\nCreates a new account with the provided details and creates the first user\nas an admin. Returns a success message instructing the user to verify their email.\n\nFlow:\n1. Validate password strength\n2. Generate or validate account slug\n3. Check slug uniqueness\n4. Generate account ID\n5. Hash password\n6. Create account record\n7. Create user record with 'admin' role\n8. Send verification email\n9. Return response (no tokens)",
        "operationId": "register_api_v1_auth_register_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RegistrationResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error"
          },
          "409": {
            "description": "Conflict - email or slug already exists"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/login": {
      "post": {
        "tags": ["auth"],
        "summary": "Login",
        "description": "Authenticate a user and return JWT tokens.\n\nValidates the user's credentials against the specified account and returns\nJWT tokens for authenticated access.\n\nFlow:\n1. Resolve account by slug or ID\n2. Look up user by email in account\n3. Check authentication provider (OAuth/SAML users must use their respective flows)\n4. Verify password using timing-safe comparison\n5. Check if user is active\n6. Update last_login timestamp\n7. Generate JWT tokens\n8. Return response\n\nSecurity:\n- All authentication failures return the same generic 401 message\n- Password verification is always performed (even with dummy hash) to prevent timing attacks",
        "operationId": "login_api_v1_auth_login_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid credentials"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/refresh": {
      "post": {
        "tags": ["auth"],
        "summary": "Refresh Tokens",
        "description": "Refresh access and refresh tokens.\n\nValidates the provided refresh token, issues new tokens, and invalidates\nthe old refresh token (token rotation).\n\nFlow:\n1. Validate refresh token (signature, expiration, type)\n2. Check if token is revoked in database\n3. Get user information from token claims\n4. Revoke old refresh token\n5. Generate new access token and refresh token\n6. Store new refresh token\n7. Return new tokens",
        "operationId": "refresh_tokens_api_v1_auth_refresh_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RefreshRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TokenRefreshResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid or expired refresh token"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/me": {
      "get": {
        "tags": ["auth"],
        "summary": "Get Current User Info",
        "description": "Get the current authenticated user's information.\n\nThis is a protected endpoint that requires a valid access token.\nReturns the user information extracted from the JWT token claims.",
        "operationId": "get_current_user_info_api_v1_auth_me_get",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Get Current User Info Api V1 Auth Me Get"
                }
              }
            }
          },
          "401": {
            "description": "Not authenticated"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/send-verification": {
      "post": {
        "tags": ["auth"],
        "summary": "Send Verification Email",
        "description": "Send a verification email to the current user.\n\nArgs:\n    request: Optional email address.\n    current_user: The authenticated user.\n    verification_service: Verification service dependency.",
        "operationId": "send_verification_email_api_v1_auth_send_verification_post",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SendVerificationRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Verification email sent",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Send Verification Email Api V1 Auth Send Verification Post"
                }
              }
            }
          },
          "401": {
            "description": "Not authenticated"
          },
          "500": {
            "description": "Failed to send email"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/resend-verification": {
      "post": {
        "tags": ["auth"],
        "summary": "Resend Verification",
        "description": "Resend verification email to the user.",
        "operationId": "resend_verification_api_v1_auth_resend_verification_post",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SendVerificationRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "400": {
            "description": "Bad Request"
          },
          "500": {
            "description": "Internal Server Error during email sending"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/verify-email": {
      "post": {
        "tags": ["auth"],
        "summary": "Verify Email",
        "description": "Verify a user's email address using a token.\n\nArgs:\n    request: Verification token.\n    verification_service: Verification service dependency.",
        "operationId": "verify_email_api_v1_auth_verify_email_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/VerifyEmailRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Email verified successfully",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Verify Email Api V1 Auth Verify Email Post"
                }
              }
            }
          },
          "400": {
            "description": "Invalid or expired token"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/forgot-password": {
      "post": {
        "tags": ["auth"],
        "summary": "Forgot Password",
        "description": "Initiate password reset flow.\n\nGenerates a reset token and sends an email with reset instructions.\nAlways returns 200 regardless of whether the email exists (security - don't reveal user existence).\n\nArgs:\n    request: FastAPI request object to get client IP.\n    forgot_request: Email and account identifier.\n    session: Database session.\n    reset_service: Password reset service dependency.\n\nReturns:\n    Generic success message.",
        "operationId": "forgot_password_api_v1_auth_forgot_password_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ForgotPasswordRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Password reset email sent (or email not found - same response)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ForgotPasswordResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/reset-password": {
      "post": {
        "tags": ["auth"],
        "summary": "Reset Password",
        "description": "Reset password using a valid reset token.\n\nValidates the token, updates the password, and invalidates all refresh tokens.\n\nArgs:\n    request: Reset token and new password.\n    reset_service: Password reset service dependency.\n\nReturns:\n    Success message.\n\nRaises:\n    HTTPException: 400 if token is invalid, expired, or already used.",
        "operationId": "reset_password_api_v1_auth_reset_password_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ResetPasswordRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Password reset successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResetPasswordResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid, expired, or used token"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/verify-reset-token/{token}": {
      "get": {
        "tags": ["auth"],
        "summary": "Verify Reset Token",
        "description": "Verify if a password reset token is valid without using it.\n\nUsed by frontend to pre-validate the token before showing the reset form.\n\nArgs:\n    token: The reset token to verify.\n    reset_service: Password reset service dependency.\n\nReturns:\n    Token validity status and expiration time.",
        "operationId": "verify_reset_token_api_v1_auth_verify_reset_token__token__get",
        "parameters": [
          {
            "name": "token",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Token validity status",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VerifyResetTokenResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/oauth/{provider_name}/authorize": {
      "post": {
        "tags": ["auth"],
        "summary": "Authorize",
        "description": "Initiate OAuth authorization flow.\n\nGenerates an authorization URL for the specified provider and stores\nthe flow state in the database for CSRF protection.\n\nFlow:\n1. Resolve provider configuration (account override -\u003E system fallback)\n2. Generate state token (if not provided)\n3. Store state in oauth_states table\n4. Generate authorization URL via provider handler\n5. Return URL and state",
        "operationId": "authorize_api_v1_auth_oauth__provider_name__authorize_post",
        "parameters": [
          {
            "name": "provider_name",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Provider Name"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OAuthAuthorizeRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OAuthAuthorizeResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error"
          },
          "404": {
            "description": "Provider not configured or account not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/oauth/{provider_name}/callback": {
      "post": {
        "tags": ["auth"],
        "summary": "Callback",
        "description": "Complete OAuth authorization flow.\n\nValidates the state token, exchanges the authorization code for tokens,\nand creates or updates the user record. Returns JWT tokens.\n\nFlow:\n1. Validate state token and check expiration\n2. Resolve provider configuration\n3. Exchange code for tokens via provider handler\n4. Fetch user info via provider handler\n5. Link to existing user or create new user/account\n6. Generate JWT tokens and return response",
        "operationId": "callback_api_v1_auth_oauth__provider_name__callback_post",
        "parameters": [
          {
            "name": "provider_name",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Provider Name"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OAuthCallbackRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OAuthCallbackResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid state or OAuth error"
          },
          "401": {
            "description": "Inactive user"
          },
          "404": {
            "description": "Provider not configured"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/saml/sso": {
      "get": {
        "tags": ["auth"],
        "summary": "Sso",
        "description": "Initiate SAML Single Sign-On flow.\n\nRedirects the user to the Identity Provider's SSO URL with a SAML AuthnRequest.\n\nArgs:\n    request: FastAPI request object.\n    account: Account identifier (slug or ID).\n    provider: Optional provider name to use (e.g., 'okta', 'azure_ad').\n              If not specified, uses the configured provider for the account.\n    relay_state: Optional state to return after successful authentication.\n    session: Database session.\n\nReturns:\n    RedirectResponse to the IdP.",
        "operationId": "sso_api_v1_auth_saml_sso_get",
        "parameters": [
          {
            "name": "account",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Account slug or ID",
              "title": "Account"
            },
            "description": "Account slug or ID"
          },
          {
            "name": "provider",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Specific provider name to force use of",
              "title": "Provider"
            },
            "description": "Specific provider name to force use of"
          },
          {
            "name": "relay_state",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Client state to preserve",
              "title": "Relay State"
            },
            "description": "Client state to preserve"
          }
        ],
        "responses": {
          "302": {
            "description": "Redirects to Identity Provider",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "404": {
            "description": "Account or provider not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/saml/acs": {
      "post": {
        "tags": ["auth"],
        "summary": "Acs",
        "description": "SAML Assertion Consumer Service (ACS) endpoint.\n\nIdentity Provider POSTs the SAML assertion here after successful authentication.",
        "operationId": "acs_api_v1_auth_saml_acs_post",
        "requestBody": {
          "content": {
            "application/x-www-form-urlencoded": {
              "schema": {
                "$ref": "#/components/schemas/Body_acs_api_v1_auth_saml_acs_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OAuthCallbackResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error"
          },
          "401": {
            "description": "Inactive user"
          },
          "404": {
            "description": "Provider not configured"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/saml/metadata": {
      "get": {
        "tags": ["auth"],
        "summary": "Metadata",
        "description": "Download SAML Service Provider Metadata XML.\n\nUsed to configure the Identity Provider to recognize this SP.\nReturns:\n    XML content with Content-Disposition attachment.",
        "operationId": "metadata_api_v1_auth_saml_metadata_get",
        "parameters": [
          {
            "name": "account",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Account slug or ID",
              "title": "Account"
            },
            "description": "Account slug or ID"
          },
          {
            "name": "provider",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Specific provider name to force use of",
              "title": "Provider"
            },
            "description": "Specific provider name to force use of"
          }
        ],
        "responses": {
          "200": {
            "description": "SAML Metadata XML",
            "content": {
              "application/json": {
                "schema": {}
              },
              "application/xml": {}
            }
          },
          "404": {
            "description": "Account or provider not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/collections": {
      "get": {
        "tags": ["collections"],
        "summary": "List Collections",
        "description": "List all collections with pagination and search.\n\nOnly superadmins (users in the system account) can list collections.",
        "operationId": "list_collections_api_v1_collections_get",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "description": "Page number",
              "default": 1,
              "title": "Page"
            },
            "description": "Page number"
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Items per page",
              "default": 25,
              "title": "Page Size"
            },
            "description": "Items per page"
          },
          {
            "name": "sort_by",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Field to sort by",
              "default": "created_at",
              "title": "Sort By"
            },
            "description": "Field to sort by"
          },
          {
            "name": "sort_order",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Sort order: asc or desc",
              "default": "desc",
              "title": "Sort Order"
            },
            "description": "Sort order: asc or desc"
          },
          {
            "name": "search",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Search term for name or ID",
              "title": "Search"
            },
            "description": "Search term for name or ID"
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CollectionListResponse"
                }
              }
            }
          },
          "403": {
            "description": "Superadmin access required"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["collections"],
        "summary": "Create Collection",
        "description": "Create a new collection with custom schema.\n\nCreates an Alembic migration and applies it to create the physical table.\nOnly superadmins can create collections.",
        "operationId": "create_collection_api_v1_collections_post",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateCollectionRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CollectionResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error"
          },
          "403": {
            "description": "Superadmin access required"
          },
          "409": {
            "description": "Collection already exists"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/collections/names": {
      "get": {
        "tags": ["collections"],
        "summary": "Get Collection Names",
        "description": "Get simple list of all collection names.\n\nReturns a simple list of collection names without pagination,\nsuitable for populating dropdowns and permission matrices.\nOnly superadmins can access this endpoint.\n\nArgs:\n    current_user: Authenticated superadmin user.\n    session: Database session.\n\nReturns:\n    List of collection names.",
        "operationId": "get_collection_names_api_v1_collections_names_get",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "403": {
            "description": "Superadmin access required"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/collections/{collection_id}": {
      "get": {
        "tags": ["collections"],
        "summary": "Get Collection",
        "description": "Get collection details by ID.\n\nOnly superadmins (users in the system account) can view collections.",
        "operationId": "get_collection_api_v1_collections__collection_id__get",
        "parameters": [
          {
            "name": "collection_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Collection Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CollectionResponse"
                }
              }
            }
          },
          "403": {
            "description": "Superadmin access required"
          },
          "404": {
            "description": "Collection not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": ["collections"],
        "summary": "Update Collection",
        "description": "Update collection schema.\n\nAllows adding new fields and modifying field properties (except type changes).\nOnly superadmins (users in the system account) can update collections.",
        "operationId": "update_collection_api_v1_collections__collection_id__put",
        "parameters": [
          {
            "name": "collection_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Collection Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateCollectionRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CollectionResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error"
          },
          "403": {
            "description": "Superadmin access required"
          },
          "404": {
            "description": "Collection not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["collections"],
        "summary": "Delete Collection",
        "description": "Delete collection and drop its physical table.\n\nOnly superadmins (users in the system account) can delete collections.",
        "operationId": "delete_collection_api_v1_collections__collection_id__delete",
        "parameters": [
          {
            "name": "collection_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Collection Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "403": {
            "description": "Superadmin access required"
          },
          "404": {
            "description": "Collection not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/invitations": {
      "post": {
        "tags": ["invitations"],
        "summary": "Create Invitation",
        "description": "Create a new invitation.\n\nCreates an invitation for a user to join the current user's account.\nSends an invitation email with a secure token.\n\nFlow:\n1. Validate email format (handled by Pydantic)\n2. Check if user already exists in account\n3. Check if pending invitation exists\n4. Generate secure token\n5. Create invitation record\n6. Send invitation email\n7. Return invitation details (excluding token)",
        "operationId": "create_invitation_api_v1_invitations_post",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/InvitationCreateRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InvitationResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error or user already in account"
          },
          "409": {
            "description": "Pending invitation already exists"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": ["invitations"],
        "summary": "List Invitations",
        "description": "List invitations.\n\nFor superadmins: lists all invitations or filters by account_id.\nFor regular users: lists invitations for their own account only.\n\nArgs:\n    current_user: Authenticated user context.\n    status_filter: Optional status filter (pending, accepted, expired).\n    account_id: Optional account ID filter (superadmin only).\n    session: Database session.\n\nReturns:\n    List of invitations.",
        "operationId": "list_invitations_api_v1_invitations_get",
        "parameters": [
          {
            "name": "status_filter",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/InvitationStatus"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Status Filter"
            }
          },
          {
            "name": "account_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Account Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InvitationListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/invitations/{invitation_id}/resend": {
      "post": {
        "tags": ["invitations"],
        "summary": "Resend Invitation",
        "description": "Resend an invitation email.\n\nResends the invitation email for a pending invitation.",
        "operationId": "resend_invitation_api_v1_invitations__invitation_id__resend_post",
        "parameters": [
          {
            "name": "invitation_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Invitation Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "404": {
            "description": "Invitation not found"
          },
          "400": {
            "description": "Cannot resend accepted or expired invitation"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/invitations/{token}": {
      "get": {
        "tags": ["invitations"],
        "summary": "Get Invitation",
        "description": "Get public invitation details.\n\nValidates the invitation token and returns non-sensitive details\nfor the acceptance page.\n\nFlow:\n1. Validate token exists\n2. Validate token not expired\n3. Validate token not already accepted\n4. Return public details",
        "operationId": "get_invitation_api_v1_invitations__token__get",
        "parameters": [
          {
            "name": "token",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InvitationPublicResponse"
                }
              }
            }
          },
          "404": {
            "description": "Invalid, expired, or already accepted token"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/invitations/{token}/accept": {
      "post": {
        "tags": ["invitations"],
        "summary": "Accept Invitation",
        "description": "Accept an invitation and create a user account.\n\nValidates the invitation token, creates a user account with the provided\npassword, and returns authentication tokens.\n\nFlow:\n1. Validate token exists\n2. Validate token not expired\n3. Validate token not already accepted\n4. Validate password strength\n5. Create user account\n6. Mark invitation as accepted\n7. Generate JWT tokens\n8. Return auth response",
        "operationId": "accept_invitation_api_v1_invitations__token__accept_post",
        "parameters": [
          {
            "name": "token",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Token"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/InvitationAcceptRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error"
          },
          "404": {
            "description": "Invalid, expired, or already accepted token"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/invitations/{invitation_id}": {
      "delete": {
        "tags": ["invitations"],
        "summary": "Cancel Invitation",
        "description": "Cancel an invitation.\n\nDeletes an invitation from the database. Only invitations belonging to\nthe current user's account can be cancelled.\n\nArgs:\n    invitation_id: ID of the invitation to cancel.\n    current_user: Authenticated user context.\n    session: Database session.\n\nRaises:\n    HTTPException: 404 if invitation not found or doesn't belong to account.",
        "operationId": "cancel_invitation_api_v1_invitations__invitation_id__delete",
        "parameters": [
          {
            "name": "invitation_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Invitation Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "404": {
            "description": "Invitation not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/permissions": {
      "post": {
        "tags": ["permissions"],
        "summary": "Create Permission",
        "description": "Create a new permission.\n\nCreates a permission linking a role to a collection with CRUD rules.\nOnly superadmins can create permissions.\n\nArgs:\n    request: Permission creation request.\n    current_user: Authenticated superadmin user.\n    session: Database session.\n\nReturns:\n    Created permission.",
        "operationId": "create_permission_api_v1_permissions_post",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreatePermissionRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PermissionResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error"
          },
          "403": {
            "description": "Superadmin access required"
          },
          "404": {
            "description": "Role not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": ["permissions"],
        "summary": "List Permissions",
        "description": "List all permissions.\n\nOnly superadmins can list permissions.\n\nArgs:\n    current_user: Authenticated superadmin user.\n    session: Database session.\n\nReturns:\n    List of all permissions.",
        "operationId": "list_permissions_api_v1_permissions_get",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PermissionListResponse"
                }
              }
            }
          },
          "403": {
            "description": "Superadmin access required"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/permissions/{permission_id}": {
      "get": {
        "tags": ["permissions"],
        "summary": "Get Permission",
        "description": "Get a permission by ID.\n\nOnly superadmins can view permission details.\n\nArgs:\n    permission_id: Permission ID.\n    current_user: Authenticated superadmin user.\n    session: Database session.\n\nReturns:\n    Permission details.",
        "operationId": "get_permission_api_v1_permissions__permission_id__get",
        "parameters": [
          {
            "name": "permission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Permission Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PermissionResponse"
                }
              }
            }
          },
          "403": {
            "description": "Superadmin access required"
          },
          "404": {
            "description": "Permission not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["permissions"],
        "summary": "Delete Permission",
        "description": "Delete a permission.\n\nOnly superadmins can delete permissions.\n\nArgs:\n    permission_id: Permission ID.\n    current_user: Authenticated superadmin user.\n    request: FastAPI request object.\n    session: Database session.",
        "operationId": "delete_permission_api_v1_permissions__permission_id__delete",
        "parameters": [
          {
            "name": "permission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Permission Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "403": {
            "description": "Superadmin access required"
          },
          "404": {
            "description": "Permission not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/roles": {
      "get": {
        "tags": ["roles"],
        "summary": "List Roles",
        "description": "List all roles with collections count.\n\nOnly superadmins can access this endpoint.\n\nArgs:\n    current_user: Authenticated superadmin user.\n    session: Database session.\n\nReturns:\n    List of all roles with collections count.",
        "operationId": "list_roles_api_v1_roles_get",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RoleListResponse"
                }
              }
            }
          },
          "403": {
            "description": "Superadmin access required"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["roles"],
        "summary": "Create Role",
        "description": "Create a new role.\n\nCreates a role with the specified name and description.\nOnly superadmins can create roles.\n\nArgs:\n    role_request: Role creation request.\n    current_user: Authenticated superadmin user.\n    session: Database session.\n\nReturns:\n    Created role.",
        "operationId": "create_role_api_v1_roles_post",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateRoleRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RoleResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error"
          },
          "403": {
            "description": "Superadmin access required"
          },
          "409": {
            "description": "Role name already exists"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/roles/{role_id}": {
      "get": {
        "tags": ["roles"],
        "summary": "Get Role",
        "description": "Get a role by ID.\n\nOnly superadmins can view role details.\n\nArgs:\n    role_id: Role ID.\n    current_user: Authenticated superadmin user.\n    session: Database session.\n\nReturns:\n    Role details.",
        "operationId": "get_role_api_v1_roles__role_id__get",
        "parameters": [
          {
            "name": "role_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Role Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RoleResponse"
                }
              }
            }
          },
          "403": {
            "description": "Superadmin access required"
          },
          "404": {
            "description": "Role not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": ["roles"],
        "summary": "Update Role",
        "description": "Update a role.\n\nUpdates the role name and description.\nOnly superadmins can update roles.\n\nArgs:\n    role_id: Role ID.\n    role_request: Role update request.\n    current_user: Authenticated superadmin user.\n    session: Database session.\n\nReturns:\n    Updated role.",
        "operationId": "update_role_api_v1_roles__role_id__put",
        "parameters": [
          {
            "name": "role_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Role Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateRoleRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RoleResponse"
                }
              }
            }
          },
          "403": {
            "description": "Superadmin access required"
          },
          "404": {
            "description": "Role not found"
          },
          "409": {
            "description": "Role name already exists"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["roles"],
        "summary": "Delete Role",
        "description": "Delete a role.\n\nDeletes the role and all associated permissions.\nDefault roles (admin, user) cannot be deleted.\nOnly superadmins can delete roles.\n\nArgs:\n    role_id: Role ID.\n    current_user: Authenticated superadmin user.\n    request: FastAPI request object.\n    session: Database session.",
        "operationId": "delete_role_api_v1_roles__role_id__delete",
        "parameters": [
          {
            "name": "role_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Role Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "403": {
            "description": "Superadmin access required"
          },
          "404": {
            "description": "Role not found"
          },
          "422": {
            "description": "Cannot delete default role"
          }
        }
      }
    },
    "/api/v1/roles/{role_id}/permissions": {
      "get": {
        "tags": ["roles"],
        "summary": "Get Role Permissions",
        "description": "Get all permissions for a role organized by collection.\n\nOnly superadmins can view role permissions.\n\nArgs:\n    role_id: Role ID.\n    current_user: Authenticated superadmin user.\n    session: Database session.\n\nReturns:\n    Role permissions organized by collection.",
        "operationId": "get_role_permissions_api_v1_roles__role_id__permissions_get",
        "parameters": [
          {
            "name": "role_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Role Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RolePermissionsResponse"
                }
              }
            }
          },
          "403": {
            "description": "Superadmin access required"
          },
          "404": {
            "description": "Role not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/roles/{role_id}/permissions/matrix": {
      "get": {
        "tags": ["roles"],
        "summary": "Get Permissions Matrix",
        "description": "Get permissions in matrix format for a role.\n\nReturns permissions for ALL collections (even those without permissions set),\nmaking it suitable for displaying in a permission matrix UI.\n\nOnly superadmins can access this endpoint.\n\nArgs:\n    role_id: Role ID.\n    current_user: Authenticated superadmin user.\n    session: Database session.\n\nReturns:\n    Role permissions in matrix format with all collections.",
        "operationId": "get_permissions_matrix_api_v1_roles__role_id__permissions_matrix_get",
        "parameters": [
          {
            "name": "role_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Role Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RolePermissionsResponse"
                }
              }
            }
          },
          "403": {
            "description": "Superadmin access required"
          },
          "404": {
            "description": "Role not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/roles/{role_id}/permissions/bulk": {
      "put": {
        "tags": ["roles"],
        "summary": "Bulk Update Permissions",
        "description": "Bulk update permissions for a role.\n\nUpdates multiple collection-operation permissions in a single request.\nOnly superadmins can update permissions.\n\nArgs:\n    role_id: Role ID.\n    bulk_request: Bulk update request with list of updates.\n    current_user: Authenticated superadmin user.\n    request: FastAPI request object.\n    session: Database session.\n\nReturns:\n    Bulk update response with success/failure counts.",
        "operationId": "bulk_update_permissions_api_v1_roles__role_id__permissions_bulk_put",
        "parameters": [
          {
            "name": "role_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Role Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BulkPermissionUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BulkPermissionUpdateResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error"
          },
          "403": {
            "description": "Superadmin access required"
          },
          "404": {
            "description": "Role not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/roles/validate-rule": {
      "post": {
        "tags": ["roles"],
        "summary": "Validate Rule",
        "description": "Validate a permission rule expression.\n\nChecks if the rule syntax is valid without executing it.\nOnly superadmins can validate rules.\n\nArgs:\n    validate_request: Rule validation request.\n    current_user: Authenticated superadmin user.\n\nReturns:\n    Validation result with position information if error.",
        "operationId": "validate_rule_api_v1_roles_validate_rule_post",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ValidateRuleRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidateRuleResponse"
                }
              }
            }
          },
          "403": {
            "description": "Superadmin access required"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/roles/test-rule": {
      "post": {
        "tags": ["roles"],
        "summary": "Test Rule",
        "description": "Test a permission rule with sample data.\n\nEvaluates the rule with the provided context to see if access would be granted.\nOnly superadmins can test rules.\n\nArgs:\n    test_request: Rule test request.\n    current_user: Authenticated superadmin user.\n    session: Database session.\n\nReturns:\n    Test result.",
        "operationId": "test_rule_api_v1_roles_test_rule_post",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TestRuleRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TestRuleResponse"
                }
              }
            }
          },
          "403": {
            "description": "Superadmin access required"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/macros": {
      "post": {
        "tags": ["macros"],
        "summary": "Create Macro",
        "description": "Create a new SQL macro.\n\nRequires superadmin privileges.",
        "operationId": "create_macro_api_v1_macros_post",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MacroCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MacroResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": ["macros"],
        "summary": "List Macros",
        "description": "List all SQL macros.\n\nAccessible by all authenticated users.",
        "operationId": "list_macros_api_v1_macros_get",
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 100,
              "title": "Limit"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/MacroResponse"
                  },
                  "title": "Response List Macros Api V1 Macros Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/macros/{macro_id}": {
      "get": {
        "tags": ["macros"],
        "summary": "Get Macro",
        "description": "Get a SQL macro by ID.\n\nAccessible by all authenticated users.",
        "operationId": "get_macro_api_v1_macros__macro_id__get",
        "parameters": [
          {
            "name": "macro_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Macro Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MacroResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": ["macros"],
        "summary": "Update Macro",
        "description": "Update a SQL macro.\n\nRequires superadmin privileges.",
        "operationId": "update_macro_api_v1_macros__macro_id__put",
        "parameters": [
          {
            "name": "macro_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Macro Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MacroUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MacroResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["macros"],
        "summary": "Delete Macro",
        "description": "Delete a SQL macro.\n\nRequires superadmin privileges.\nFails if macro is used in any active permission rules.",
        "operationId": "delete_macro_api_v1_macros__macro_id__delete",
        "parameters": [
          {
            "name": "macro_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Macro Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/macros/{macro_id}/test": {
      "post": {
        "tags": ["macros"],
        "summary": "Test Macro",
        "description": "Test a SQL macro execution.\n\nExecutes the macro in a transaction that is rolled back after execution.\nRequires superadmin privileges.",
        "operationId": "test_macro_api_v1_macros__macro_id__test_post",
        "parameters": [
          {
            "name": "macro_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Macro Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MacroTestRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MacroTestResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/groups": {
      "post": {
        "tags": ["groups", "Groups"],
        "summary": "Create a new group",
        "description": "Create a new group in the user's account.\n\nRequires authenticated user (usually admin, but enforced via permissions logic if needed).\nFor now, any authenticated user can create groups in their account (or restrict to admin).",
        "operationId": "create_group_api_v1_groups_post",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GroupCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GroupDetailResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": ["groups", "Groups"],
        "summary": "List groups",
        "description": "List all groups in the user's account (or all groups if superadmin).",
        "operationId": "list_groups_api_v1_groups_get",
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 100,
              "title": "Limit"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/GroupResponse"
                  },
                  "title": "Response List Groups Api V1 Groups Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/groups/{group_id}": {
      "get": {
        "tags": ["groups", "Groups"],
        "summary": "Get a group",
        "description": "Get a specific group by ID.",
        "operationId": "get_group_api_v1_groups__group_id__get",
        "parameters": [
          {
            "name": "group_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Group Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GroupDetailResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": ["groups", "Groups"],
        "summary": "Update a group",
        "description": "Update a group.",
        "operationId": "update_group_api_v1_groups__group_id__patch",
        "parameters": [
          {
            "name": "group_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Group Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GroupUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GroupDetailResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["groups", "Groups"],
        "summary": "Delete a group",
        "description": "Delete a group.",
        "operationId": "delete_group_api_v1_groups__group_id__delete",
        "parameters": [
          {
            "name": "group_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Group Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/groups/{group_id}/users": {
      "post": {
        "tags": ["groups", "Groups"],
        "summary": "Add user to group",
        "description": "Add a user to a group.",
        "operationId": "add_user_to_group_api_v1_groups__group_id__users_post",
        "parameters": [
          {
            "name": "group_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Group Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserGroupUpdate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  },
                  "title": "Response Add User To Group Api V1 Groups  Group Id  Users Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/groups/{group_id}/users/{user_id}": {
      "delete": {
        "tags": ["groups", "Groups"],
        "summary": "Remove user from group",
        "description": "Remove a user from a group.",
        "operationId": "remove_user_from_group_api_v1_groups__group_id__users__user_id__delete",
        "parameters": [
          {
            "name": "group_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Group Id"
            }
          },
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "User Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/dashboard/stats": {
      "get": {
        "tags": ["dashboard"],
        "summary": "Get Dashboard Stats",
        "description": "Get dashboard statistics.\n\nReturns comprehensive dashboard metrics including:\n- Total counts (accounts, users, collections, records)\n- Growth metrics (new accounts/users in last 7 days)\n- Recent registrations (last 10 users)\n- System health (database status, storage usage)\n- Active sessions count\n- Recent audit logs (PII masked based on user group membership)\n\nOnly superadmins (users in the system account with nil UUID) can access this endpoint.\nPII is masked unless the user belongs to the 'pii_access' group.",
        "operationId": "get_dashboard_stats_api_v1_dashboard_stats_get",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DashboardStats"
                }
              }
            }
          },
          "403": {
            "description": "Superadmin access required"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/files/upload": {
      "post": {
        "tags": ["files", "files"],
        "summary": "Upload a file",
        "description": "Upload a file to storage. Returns file metadata including path for use in records.",
        "operationId": "upload_file_api_v1_files_upload_post",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_upload_file_api_v1_files_upload_post"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FileUploadResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/files/{file_path}": {
      "get": {
        "tags": ["files", "files"],
        "summary": "Download a file",
        "description": "Download a file from storage. Requires authentication and proper permissions.",
        "operationId": "download_file_api_v1_files__file_path__get",
        "parameters": [
          {
            "name": "file_path",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "File Path"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/accounts": {
      "get": {
        "tags": ["accounts"],
        "summary": "List Accounts",
        "description": "List all accounts with pagination, sorting, and search.\n\nReturns a paginated list of accounts with user counts.\nOnly superadmins can access this endpoint.",
        "operationId": "list_accounts_api_v1_accounts_get",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "description": "Page number (1-indexed)",
              "default": 1,
              "title": "Page"
            },
            "description": "Page number (1-indexed)"
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Items per page",
              "default": 25,
              "title": "Page Size"
            },
            "description": "Items per page"
          },
          {
            "name": "sort_by",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Column to sort by",
              "default": "created_at",
              "title": "Sort By"
            },
            "description": "Column to sort by"
          },
          {
            "name": "sort_order",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "pattern": "^(asc|desc)$",
              "description": "Sort order",
              "default": "desc",
              "title": "Sort Order"
            },
            "description": "Sort order"
          },
          {
            "name": "search",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Search query",
              "title": "Search"
            },
            "description": "Search query"
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AccountListResponse"
                }
              }
            }
          },
          "403": {
            "description": "Superadmin access required"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["accounts"],
        "summary": "Create Account",
        "description": "Create a new account.\n\nCreates a new account with auto-generated ID and optional slug.\nOnly superadmins can access this endpoint.",
        "operationId": "create_account_api_v1_accounts_post",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateAccountRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AccountDetailResponse"
                }
              }
            }
          },
          "403": {
            "description": "Superadmin access required"
          },
          "422": {
            "description": "Validation error"
          }
        }
      }
    },
    "/api/v1/accounts/{account_id}": {
      "get": {
        "tags": ["accounts"],
        "summary": "Get Account",
        "description": "Get detailed account information.\n\nReturns account details including user count and collections used.\nOnly superadmins can access this endpoint.",
        "operationId": "get_account_api_v1_accounts__account_id__get",
        "parameters": [
          {
            "name": "account_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Account Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AccountDetailResponse"
                }
              }
            }
          },
          "403": {
            "description": "Superadmin access required"
          },
          "404": {
            "description": "Account not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": ["accounts"],
        "summary": "Update Account",
        "description": "Update an account.\n\nUpdates the account name. Slug and ID are immutable.\nOnly superadmins can access this endpoint.",
        "operationId": "update_account_api_v1_accounts__account_id__put",
        "parameters": [
          {
            "name": "account_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Account Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateAccountRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AccountDetailResponse"
                }
              }
            }
          },
          "403": {
            "description": "Superadmin access required"
          },
          "404": {
            "description": "Account not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["accounts"],
        "summary": "Delete Account",
        "description": "Delete an account.\n\nDeletes the account and all associated users and data (cascade).\nSystem account (nil UUID) cannot be deleted.\nOnly superadmins can access this endpoint.",
        "operationId": "delete_account_api_v1_accounts__account_id__delete",
        "parameters": [
          {
            "name": "account_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Account Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "403": {
            "description": "Superadmin access required"
          },
          "404": {
            "description": "Account not found"
          },
          "422": {
            "description": "Cannot delete system account"
          }
        }
      }
    },
    "/api/v1/accounts/{account_id}/users": {
      "get": {
        "tags": ["accounts"],
        "summary": "Get Account Users",
        "description": "Get users in an account.\n\nReturns a paginated list of users for the specified account.\nOnly superadmins can access this endpoint.",
        "operationId": "get_account_users_api_v1_accounts__account_id__users_get",
        "parameters": [
          {
            "name": "account_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Account Id"
            }
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "description": "Page number (1-indexed)",
              "default": 1,
              "title": "Page"
            },
            "description": "Page number (1-indexed)"
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Items per page",
              "default": 25,
              "title": "Page Size"
            },
            "description": "Items per page"
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AccountUsersResponse"
                }
              }
            }
          },
          "403": {
            "description": "Superadmin access required"
          },
          "404": {
            "description": "Account not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/audit-logs/": {
      "get": {
        "tags": ["audit-logs"],
        "summary": "List Audit Logs",
        "description": "List audit log entries with advanced filtering and pagination.\n\nOnly superadmins can access audit logs.\nPII is masked unless the user belongs to the 'pii_access' group.",
        "operationId": "list_audit_logs_api_v1_audit_logs__get",
        "parameters": [
          {
            "name": "account_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by account ID",
              "title": "Account Id"
            },
            "description": "Filter by account ID"
          },
          {
            "name": "table_name",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by table name",
              "title": "Table Name"
            },
            "description": "Filter by table name"
          },
          {
            "name": "record_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by record ID",
              "title": "Record Id"
            },
            "description": "Filter by record ID"
          },
          {
            "name": "user_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by user ID",
              "title": "User Id"
            },
            "description": "Filter by user ID"
          },
          {
            "name": "operation",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by operation (CREATE, UPDATE, DELETE)",
              "title": "Operation"
            },
            "description": "Filter by operation (CREATE, UPDATE, DELETE)"
          },
          {
            "name": "from_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter from this timestamp (ISO 8601)",
              "title": "From Date"
            },
            "description": "Filter from this timestamp (ISO 8601)"
          },
          {
            "name": "to_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter to this timestamp (ISO 8601)",
              "title": "To Date"
            },
            "description": "Filter to this timestamp (ISO 8601)"
          },
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Number of entries to skip",
              "default": 0,
              "title": "Skip"
            },
            "description": "Number of entries to skip"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 500,
              "minimum": 1,
              "description": "Maximum number of entries to return",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum number of entries to return"
          },
          {
            "name": "sort_by",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Field to sort by",
              "default": "occurred_at",
              "title": "Sort By"
            },
            "description": "Field to sort by"
          },
          {
            "name": "sort_order",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "pattern": "^(asc|desc)$",
              "description": "Sort order (asc or desc)",
              "default": "desc",
              "title": "Sort Order"
            },
            "description": "Sort order (asc or desc)"
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuditLogListResponse"
                }
              }
            }
          },
          "403": {
            "description": "Superadmin access required"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/audit-logs/export": {
      "get": {
        "tags": ["audit-logs"],
        "summary": "Export Audit Logs",
        "description": "Export audit logs in CSV or JSON format.\n\nApplies current filters to the exported data.\nOnly superadmins can export audit logs.\nPII is masked unless the user belongs to the 'pii_access' group.",
        "operationId": "export_audit_logs_api_v1_audit_logs_export_get",
        "parameters": [
          {
            "name": "format",
            "in": "query",
            "required": false,
            "schema": {
              "$ref": "#/components/schemas/AuditLogExportFormat",
              "description": "Export format",
              "default": "csv"
            },
            "description": "Export format"
          },
          {
            "name": "account_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by account ID",
              "title": "Account Id"
            },
            "description": "Filter by account ID"
          },
          {
            "name": "table_name",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by table name",
              "title": "Table Name"
            },
            "description": "Filter by table name"
          },
          {
            "name": "record_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by record ID",
              "title": "Record Id"
            },
            "description": "Filter by record ID"
          },
          {
            "name": "user_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by user ID",
              "title": "User Id"
            },
            "description": "Filter by user ID"
          },
          {
            "name": "operation",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by operation",
              "title": "Operation"
            },
            "description": "Filter by operation"
          },
          {
            "name": "from_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter from this timestamp",
              "title": "From Date"
            },
            "description": "Filter from this timestamp"
          },
          {
            "name": "to_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter to this timestamp",
              "title": "To Date"
            },
            "description": "Filter to this timestamp"
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Exported audit logs",
            "content": {
              "application/json": {
                "schema": {}
              },
              "text/csv": {}
            }
          },
          "403": {
            "description": "Superadmin access required"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/audit-logs/{log_id}": {
      "get": {
        "tags": ["audit-logs"],
        "summary": "Get Audit Log",
        "description": "Get a single audit log entry by ID.\n\nIncludes full details and integrity chain information.\nOnly superadmins can access audit logs.\nPII is masked unless the user belongs to the 'pii_access' group.",
        "operationId": "get_audit_log_api_v1_audit_logs__log_id__get",
        "parameters": [
          {
            "name": "log_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Log Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuditLogResponse"
                }
              }
            }
          },
          "403": {
            "description": "Superadmin access required"
          },
          "404": {
            "description": "Audit log entry not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/migrations": {
      "get": {
        "tags": ["migrations"],
        "summary": "List Migrations",
        "description": "List all Alembic revisions.\n\nReturns all migration revisions from both core and dynamic directories\nwith their application status.\n\nOnly superadmins can access this endpoint.",
        "operationId": "list_migrations_api_v1_migrations_get",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MigrationListResponse"
                }
              }
            }
          },
          "403": {
            "description": "Superadmin access required"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/migrations/current": {
      "get": {
        "tags": ["migrations"],
        "summary": "Get Current Migration",
        "description": "Get current database revision.\n\nReturns the currently applied migration revision.\n\nOnly superadmins can access this endpoint.",
        "operationId": "get_current_migration_api_v1_migrations_current_get",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CurrentRevisionResponse"
                }
              }
            }
          },
          "403": {
            "description": "Superadmin access required"
          },
          "404": {
            "description": "No current revision (database not initialized)"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/migrations/history": {
      "get": {
        "tags": ["migrations"],
        "summary": "Get Migration History",
        "description": "Get full migration history.\n\nReturns all applied migrations in chronological order from oldest to newest.\n\nOnly superadmins can access this endpoint.",
        "operationId": "get_migration_history_api_v1_migrations_history_get",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MigrationHistoryResponse"
                }
              }
            }
          },
          "403": {
            "description": "Superadmin access required"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users": {
      "post": {
        "tags": ["users", "Users"],
        "summary": "Create a new user",
        "description": "Create a new user in any account (superadmin only).\n\nCreates a user with the specified email, password, account, and role.\nFor password-based users, the password must meet security requirements.\nFor OAuth/SAML users, a random unknowable password is auto-generated.",
        "operationId": "create_user_api_v1_users_post",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserCreateRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/snackbase__infrastructure__api__schemas__users_schemas__UserResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": ["users", "Users"],
        "summary": "List users",
        "description": "List users with optional filters (superadmin only).\n\nReturns a paginated list of users across all accounts.\nSupports filtering by account, role, status, and email search.",
        "operationId": "list_users_api_v1_users_get",
        "parameters": [
          {
            "name": "account_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by account ID",
              "title": "Account Id"
            },
            "description": "Filter by account ID"
          },
          {
            "name": "role_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by role ID",
              "title": "Role Id"
            },
            "description": "Filter by role ID"
          },
          {
            "name": "is_active",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by active status",
              "title": "Is Active"
            },
            "description": "Filter by active status"
          },
          {
            "name": "search",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Search by email",
              "title": "Search"
            },
            "description": "Search by email"
          },
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Number of records to skip",
              "default": 0,
              "title": "Skip"
            },
            "description": "Number of records to skip"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum number of records to return",
              "default": 30,
              "title": "Limit"
            },
            "description": "Maximum number of records to return"
          },
          {
            "name": "sort",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Sort field with +/- prefix",
              "default": "-created_at",
              "title": "Sort"
            },
            "description": "Sort field with +/- prefix"
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users/{user_id}": {
      "get": {
        "tags": ["users", "Users"],
        "summary": "Get a user",
        "description": "Get a specific user by ID (superadmin only).",
        "operationId": "get_user_api_v1_users__user_id__get",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "User Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/snackbase__infrastructure__api__schemas__users_schemas__UserResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": ["users", "Users"],
        "summary": "Update a user",
        "description": "Update a user's email, role, or active status (superadmin only).\n\nCannot modify password through this endpoint - use the password reset endpoint.\nCannot modify your own role or deactivate yourself.",
        "operationId": "update_user_api_v1_users__user_id__patch",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "User Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/snackbase__infrastructure__api__schemas__users_schemas__UserResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["users", "Users"],
        "summary": "Deactivate a user",
        "description": "Deactivate a user (soft delete via is_active flag) (superadmin only).\n\nThe user will not be able to log in, but their data is preserved.\nYou cannot deactivate yourself.",
        "operationId": "deactivate_user_api_v1_users__user_id__delete",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "User Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users/{user_id}/password": {
      "put": {
        "tags": ["users", "Users"],
        "summary": "Reset user password",
        "description": "Reset a user's password (superadmin only).\n\nCan either send a reset link email or set a new password directly.\nInvalidates all of the user's refresh tokens, forcing them to log in again.",
        "operationId": "reset_user_password_api_v1_users__user_id__password_put",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "User Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PasswordResetRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  },
                  "title": "Response Reset User Password Api V1 Users  User Id  Password Put"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users/{user_id}/verify": {
      "post": {
        "tags": ["users", "Users"],
        "summary": "Manually verify user email",
        "description": "Manually mark a user's email as verified (superadmin only).\n\nThis bypasses the email token flow and directly updates the user's status.",
        "operationId": "verify_user_email_api_v1_users__user_id__verify_post",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "User Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  },
                  "title": "Response Verify User Email Api V1 Users  User Id  Verify Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users/{user_id}/resend-verification": {
      "post": {
        "tags": ["users", "Users"],
        "summary": "Resend verification email",
        "description": "Resend verification email to a user (superadmin only).",
        "operationId": "resend_user_verification_api_v1_users__user_id__resend_verification_post",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "User Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  },
                  "title": "Response Resend User Verification Api V1 Users  User Id  Resend Verification Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/configuration/stats": {
      "get": {
        "tags": ["admin", "admin"],
        "summary": "Get Configuration Stats",
        "description": "Get configuration statistics for the dashboard.\n\nReturns counts of enabled system and account configurations grouped by category.",
        "operationId": "get_configuration_stats_api_v1_admin_configuration_stats_get",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/configuration/recent": {
      "get": {
        "tags": ["admin", "admin"],
        "summary": "Get Recent Configurations",
        "description": "Get recently modified configurations.\n\nArgs:\n    limit: Number of records to return (default: 5)",
        "operationId": "get_recent_configurations_api_v1_admin_configuration_recent_get",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 5,
              "title": "Limit"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/configuration/system": {
      "get": {
        "tags": ["admin", "admin"],
        "summary": "Get System Configurations",
        "description": "List all system configurations.\n\nArgs:\n    category: Optional category filter.",
        "operationId": "get_system_configurations_api_v1_admin_configuration_system_get",
        "parameters": [
          {
            "name": "category",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Category"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/configuration/account": {
      "get": {
        "tags": ["admin", "admin"],
        "summary": "Get Account Configurations",
        "description": "List all configurations for a specific account.\n\nArgs:\n    account_id: Account ID to fetch configurations for.\n    category: Optional category filter.",
        "operationId": "get_account_configurations_api_v1_admin_configuration_account_get",
        "parameters": [
          {
            "name": "account_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Account Id"
            }
          },
          {
            "name": "category",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Category"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/configuration/{config_id}": {
      "patch": {
        "tags": ["admin", "admin"],
        "summary": "Update Configuration Status",
        "description": "Update configuration status (enable/disable).\n\nArgs:\n    config_id: Configuration ID.\n    enabled: New enabled status.",
        "operationId": "update_configuration_status_api_v1_admin_configuration__config_id__patch",
        "parameters": [
          {
            "name": "config_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Config Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Body_update_configuration_status_api_v1_admin_configuration__config_id__patch"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["admin", "admin"],
        "summary": "Delete Configuration",
        "description": "Delete a configuration.\n\nCannot delete built-in providers.",
        "operationId": "delete_configuration_api_v1_admin_configuration__config_id__delete",
        "parameters": [
          {
            "name": "config_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Config Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/configuration/providers": {
      "get": {
        "tags": ["admin", "admin"],
        "summary": "Get Available Providers",
        "description": "List all available provider definitions.",
        "operationId": "get_available_providers_api_v1_admin_configuration_providers_get",
        "parameters": [
          {
            "name": "category",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Category"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/configuration/schema/{category}/{provider_name}": {
      "get": {
        "tags": ["admin", "admin"],
        "summary": "Get Provider Schema",
        "description": "Get the JSON schema for a specific provider.",
        "operationId": "get_provider_schema_api_v1_admin_configuration_schema__category___provider_name__get",
        "parameters": [
          {
            "name": "category",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Category"
            }
          },
          {
            "name": "provider_name",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Provider Name"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/configuration/{config_id}/values": {
      "get": {
        "tags": ["admin", "admin"],
        "summary": "Get Configuration Values",
        "description": "Get decrypted configuration values with secrets masked.",
        "operationId": "get_configuration_values_api_v1_admin_configuration__config_id__values_get",
        "parameters": [
          {
            "name": "config_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Config Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": ["admin", "admin"],
        "summary": "Update Configuration Values",
        "description": "Update configuration values.",
        "operationId": "update_configuration_values_api_v1_admin_configuration__config_id__values_patch",
        "parameters": [
          {
            "name": "config_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Config Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "additionalProperties": true,
                "title": "Values"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/configuration": {
      "post": {
        "tags": ["admin", "admin"],
        "summary": "Create Configuration",
        "description": "Create a new configuration record.",
        "operationId": "create_configuration_api_v1_admin_configuration_post",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "additionalProperties": true,
                "title": "Data"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/configuration/test-connection": {
      "post": {
        "tags": ["admin", "admin"],
        "summary": "Test Provider Connection",
        "description": "Test connection for a provider configuration.",
        "operationId": "test_provider_connection_api_v1_admin_configuration_test_connection_post",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "additionalProperties": true,
                "title": "Data"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/email/templates": {
      "get": {
        "tags": ["admin", "email", "admin", "email"],
        "summary": "List Email Templates",
        "description": "List all email templates with optional filters.\n\nArgs:\n    template_type: Optional filter by template type.\n    locale: Optional filter by locale.\n    account_id: Optional filter by account ID.\n    enabled: Optional filter by enabled status.\n\nReturns:\n    List of email templates matching the filters.",
        "operationId": "list_email_templates_api_v1_admin_email_templates_get",
        "parameters": [
          {
            "name": "template_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Template Type"
            }
          },
          {
            "name": "locale",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Locale"
            }
          },
          {
            "name": "account_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Account Id"
            }
          },
          {
            "name": "enabled",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Enabled"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/EmailTemplateResponse"
                  },
                  "title": "Response List Email Templates Api V1 Admin Email Templates Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/email/templates/{template_id}": {
      "get": {
        "tags": ["admin", "email", "admin", "email"],
        "summary": "Get Email Template",
        "description": "Get email template by ID.\n\nArgs:\n    template_id: Template ID to retrieve.\n\nReturns:\n    Email template details.\n\nRaises:\n    HTTPException: 404 if template not found.",
        "operationId": "get_email_template_api_v1_admin_email_templates__template_id__get",
        "parameters": [
          {
            "name": "template_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Template Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EmailTemplateResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": ["admin", "email", "admin", "email"],
        "summary": "Update Email Template",
        "description": "Update an email template.\n\nArgs:\n    template_id: Template ID to update.\n    update_data: Fields to update.\n\nReturns:\n    Updated email template.\n\nRaises:\n    HTTPException: 404 if template not found.",
        "operationId": "update_email_template_api_v1_admin_email_templates__template_id__put",
        "parameters": [
          {
            "name": "template_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Template Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EmailTemplateUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EmailTemplateResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/email/templates/render": {
      "post": {
        "tags": ["admin", "email", "admin", "email"],
        "summary": "Render Email Template",
        "description": "Render an email template without sending.\n\nArgs:\n    render_request: Template rendering request with variables.\n\nReturns:\n    Rendered email content (subject, html_body, text_body).\n\nRaises:\n    HTTPException: 404 if template not found, 422 if rendering fails.",
        "operationId": "render_email_template_api_v1_admin_email_templates_render_post",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EmailTemplateRenderRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EmailTemplateRenderResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/email/templates/{template_id}/test": {
      "post": {
        "tags": ["admin", "email", "admin", "email"],
        "summary": "Send Test Email",
        "description": "Send a test email using the specified template.\n\nArgs:\n    template_id: Template ID to use for test email.\n    test_request: Test email request with recipient and variables.\n    request: FastAPI request object for accessing app state.\n\nReturns:\n    Success message with email details.\n\nRaises:\n    HTTPException: 404 if template not found, 400 if no email provider configured,\n                  500 if sending fails.",
        "operationId": "send_test_email_api_v1_admin_email_templates__template_id__test_post",
        "parameters": [
          {
            "name": "template_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Template Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EmailTemplateTestRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Send Test Email Api V1 Admin Email Templates  Template Id  Test Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/email/logs": {
      "get": {
        "tags": ["admin", "email", "admin", "email"],
        "summary": "List Email Logs",
        "description": "List email logs with optional filters and pagination.\n\nArgs:\n    status_filter: Optional filter by status ('sent', 'failed', 'pending').\n    template_type: Optional filter by template type.\n    start_date: Optional filter by start date (ISO format).\n    end_date: Optional filter by end date (ISO format).\n    page: Page number (default: 1).\n    page_size: Number of logs per page (default: 25, max: 100).\n\nReturns:\n    Paginated list of email logs.",
        "operationId": "list_email_logs_api_v1_admin_email_logs_get",
        "parameters": [
          {
            "name": "status_filter",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Status Filter"
            }
          },
          {
            "name": "template_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Template Type"
            }
          },
          {
            "name": "start_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Start Date"
            }
          },
          {
            "name": "end_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "End Date"
            }
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 1,
              "title": "Page"
            }
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 25,
              "title": "Page Size"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EmailLogListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/email/logs/{log_id}": {
      "get": {
        "tags": ["admin", "email", "admin", "email"],
        "summary": "Get Email Log",
        "description": "Get email log by ID.\n\nArgs:\n    log_id: Log ID to retrieve.\n\nReturns:\n    Email log details.\n\nRaises:\n    HTTPException: 404 if log not found.",
        "operationId": "get_email_log_api_v1_admin_email_logs__log_id__get",
        "parameters": [
          {
            "name": "log_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Log Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EmailLogResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/records/{collection}": {
      "post": {
        "tags": ["records"],
        "summary": "Create Record",
        "description": "Create a new record in a collection.\n\nValidates the request data against the collection schema, auto-generates\na record ID, and sets system fields (account_id, created_at, created_by).\n\nArgs:\n    collection: The collection name (from URL path).\n    data: The record data (request body). May include 'account_id' for superadmins.\n    current_user: The authenticated user.\n    auth_context: Authorization context for permission checking.\n    session: Database session.\n\nReturns:\n    The created record with all fields including system fields.",
        "operationId": "create_record_api_v1_records__collection__post",
        "parameters": [
          {
            "name": "collection",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Collection"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "additionalProperties": true,
                "title": "Data"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RecordResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RecordValidationErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required"
          },
          "403": {
            "description": "Permission denied"
          },
          "404": {
            "description": "Collection not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": ["records"],
        "summary": "List Records",
        "description": "List records in a collection.\n\nSupports pagination, sorting, and filtering.",
        "operationId": "list_records_api_v1_records__collection__get",
        "parameters": [
          {
            "name": "collection",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Collection"
            }
          },
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "default": 30,
              "title": "Limit"
            }
          },
          {
            "name": "sort",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "default": "-created_at",
              "title": "Sort"
            }
          },
          {
            "name": "fields",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Fields"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RecordListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required"
          },
          "403": {
            "description": "Permission denied"
          },
          "404": {
            "description": "Collection not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/records/{collection}/{record_id}": {
      "get": {
        "tags": ["records"],
        "summary": "Get Record",
        "description": "Get a single record by ID.",
        "operationId": "get_record_api_v1_records__collection___record_id__get",
        "parameters": [
          {
            "name": "collection",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Collection"
            }
          },
          {
            "name": "record_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Record Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RecordResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required"
          },
          "403": {
            "description": "Permission denied"
          },
          "404": {
            "description": "Record not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": ["records"],
        "summary": "Update Record Full",
        "description": "Update a record (full replacement).\n\nReplaces the entire record with the provided data (except system fields).",
        "operationId": "update_record_full_api_v1_records__collection___record_id__put",
        "parameters": [
          {
            "name": "collection",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Collection"
            }
          },
          {
            "name": "record_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Record Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "additionalProperties": true,
                "title": "Data"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RecordResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RecordValidationErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required"
          },
          "403": {
            "description": "Permission denied"
          },
          "404": {
            "description": "Record or collection not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": ["records"],
        "summary": "Update Record Partial",
        "description": "Update a record (partial update).\n\nUpdates only the provided fields.",
        "operationId": "update_record_partial_api_v1_records__collection___record_id__patch",
        "parameters": [
          {
            "name": "collection",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Collection"
            }
          },
          {
            "name": "record_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Record Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "additionalProperties": true,
                "title": "Data"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RecordResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RecordValidationErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required"
          },
          "403": {
            "description": "Permission denied"
          },
          "404": {
            "description": "Record or collection not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["records"],
        "summary": "Delete Record",
        "description": "Delete a record by ID.",
        "operationId": "delete_record_api_v1_records__collection___record_id__delete",
        "parameters": [
          {
            "name": "collection",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Collection"
            }
          },
          {
            "name": "record_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Record Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "204": {
            "description": "Record deleted successfully"
          },
          "401": {
            "description": "Authentication required"
          },
          "403": {
            "description": "Permission denied"
          },
          "404": {
            "description": "Record or collection not found"
          },
          "409": {
            "description": "Conflict (Foreign Key Restriction)"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1": {
      "get": {
        "tags": ["root"],
        "summary": "Api Root",
        "description": "API root endpoint.",
        "operationId": "api_root_api_v1_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AccountDetailResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Account ID (UUID)"
          },
          "account_code": {
            "type": "string",
            "title": "Account Code",
            "description": "Human-readable account code in XX#### format (e.g., AB1234)"
          },
          "slug": {
            "type": "string",
            "title": "Slug",
            "description": "URL-friendly account identifier"
          },
          "name": {
            "type": "string",
            "title": "Name",
            "description": "Display name for the account"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "When the account was created"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At",
            "description": "When the account was last updated"
          },
          "user_count": {
            "type": "integer",
            "title": "User Count",
            "description": "Number of users in this account"
          },
          "collections_used": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Collections Used",
            "description": "Collections used by this account"
          }
        },
        "type": "object",
        "required": [
          "id",
          "account_code",
          "slug",
          "name",
          "created_at",
          "updated_at",
          "user_count"
        ],
        "title": "AccountDetailResponse",
        "description": "Detailed account information."
      },
      "AccountListItem": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Account ID (UUID)"
          },
          "account_code": {
            "type": "string",
            "title": "Account Code",
            "description": "Human-readable account code in XX#### format (e.g., AB1234)"
          },
          "slug": {
            "type": "string",
            "title": "Slug",
            "description": "URL-friendly account identifier"
          },
          "name": {
            "type": "string",
            "title": "Name",
            "description": "Display name for the account"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "When the account was created"
          },
          "user_count": {
            "type": "integer",
            "title": "User Count",
            "description": "Number of users in this account"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Account status",
            "default": "active"
          }
        },
        "type": "object",
        "required": [
          "id",
          "account_code",
          "slug",
          "name",
          "created_at",
          "user_count"
        ],
        "title": "AccountListItem",
        "description": "Account item in list view with statistics."
      },
      "AccountListResponse": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/AccountListItem"
            },
            "type": "array",
            "title": "Items",
            "description": "List of accounts"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Total number of accounts"
          },
          "page": {
            "type": "integer",
            "title": "Page",
            "description": "Current page number (1-indexed)"
          },
          "page_size": {
            "type": "integer",
            "title": "Page Size",
            "description": "Number of items per page"
          },
          "total_pages": {
            "type": "integer",
            "title": "Total Pages",
            "description": "Total number of pages"
          }
        },
        "type": "object",
        "required": ["items", "total", "page", "page_size", "total_pages"],
        "title": "AccountListResponse",
        "description": "Paginated response for account list."
      },
      "AccountResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Account ID in XX#### format"
          },
          "slug": {
            "type": "string",
            "title": "Slug",
            "description": "URL-friendly account identifier"
          },
          "name": {
            "type": "string",
            "title": "Name",
            "description": "Display name for the account"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "When the account was created"
          }
        },
        "type": "object",
        "required": ["id", "slug", "name", "created_at"],
        "title": "AccountResponse",
        "description": "Account information in auth responses."
      },
      "AccountUserResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "User ID"
          },
          "email": {
            "type": "string",
            "title": "Email",
            "description": "User email address"
          },
          "role": {
            "type": "string",
            "title": "Role",
            "description": "User role name"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active",
            "description": "Whether the user is active"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "When the user was created"
          }
        },
        "type": "object",
        "required": ["id", "email", "role", "is_active", "created_at"],
        "title": "AccountUserResponse",
        "description": "User information in account users list."
      },
      "AccountUsersResponse": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/AccountUserResponse"
            },
            "type": "array",
            "title": "Items",
            "description": "List of users"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Total number of users"
          },
          "page": {
            "type": "integer",
            "title": "Page",
            "description": "Current page number (1-indexed)"
          },
          "page_size": {
            "type": "integer",
            "title": "Page Size",
            "description": "Number of items per page"
          },
          "total_pages": {
            "type": "integer",
            "title": "Total Pages",
            "description": "Total number of pages"
          }
        },
        "type": "object",
        "required": ["items", "total", "page", "page_size", "total_pages"],
        "title": "AccountUsersResponse",
        "description": "Paginated response for account users list."
      },
      "AuditLogExportFormat": {
        "type": "string",
        "enum": ["csv", "json", "pdf"],
        "title": "AuditLogExportFormat",
        "description": "Available export formats for audit logs."
      },
      "AuditLogListResponse": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/AuditLogResponse"
            },
            "type": "array",
            "title": "Items",
            "description": "List of audit log entries"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Total number of entries matching filters"
          },
          "skip": {
            "type": "integer",
            "title": "Skip",
            "description": "Number of entries skipped"
          },
          "limit": {
            "type": "integer",
            "title": "Limit",
            "description": "Number of entries returned"
          }
        },
        "type": "object",
        "required": ["items", "total", "skip", "limit"],
        "title": "AuditLogListResponse",
        "description": "Response for listing audit logs."
      },
      "AuditLogResponse": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id",
            "description": "Unique identifier (sequence number)"
          },
          "account_id": {
            "type": "string",
            "title": "Account Id",
            "description": "Account context (UUID)"
          },
          "operation": {
            "type": "string",
            "title": "Operation",
            "description": "Operation type: CREATE, UPDATE, DELETE"
          },
          "table_name": {
            "type": "string",
            "title": "Table Name",
            "description": "Table/collection name"
          },
          "record_id": {
            "type": "string",
            "title": "Record Id",
            "description": "ID of the affected record"
          },
          "column_name": {
            "type": "string",
            "title": "Column Name",
            "description": "Name of the changed column"
          },
          "old_value": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Old Value",
            "description": "Previous value"
          },
          "new_value": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "New Value",
            "description": "New value"
          },
          "user_id": {
            "type": "string",
            "title": "User Id",
            "description": "ID of user who made the change"
          },
          "user_email": {
            "type": "string",
            "title": "User Email",
            "description": "Email of user who made the change"
          },
          "user_name": {
            "type": "string",
            "title": "User Name",
            "description": "Name of user who made the change"
          },
          "es_username": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Es Username",
            "description": "Electronic signature username"
          },
          "es_reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Es Reason",
            "description": "Electronic signature reason"
          },
          "es_timestamp": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Es Timestamp",
            "description": "Electronic signature timestamp"
          },
          "ip_address": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ip Address",
            "description": "Client IP address"
          },
          "user_agent": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "User Agent",
            "description": "User agent string"
          },
          "request_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Request Id",
            "description": "Correlation ID"
          },
          "occurred_at": {
            "type": "string",
            "format": "date-time",
            "title": "Occurred At",
            "description": "Timestamp of the change (UTC)"
          },
          "checksum": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Checksum",
            "description": "SHA-256 hash of this entry"
          },
          "previous_hash": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Previous Hash",
            "description": "Checksum of the previous entry"
          },
          "extra_metadata": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Extra Metadata",
            "description": "Additional metadata"
          }
        },
        "type": "object",
        "required": [
          "id",
          "account_id",
          "operation",
          "table_name",
          "record_id",
          "column_name",
          "user_id",
          "user_email",
          "user_name",
          "occurred_at"
        ],
        "title": "AuditLogResponse",
        "description": "Response for a single audit log entry."
      },
      "AuthResponse": {
        "properties": {
          "token": {
            "type": "string",
            "title": "Token",
            "description": "JWT access token"
          },
          "refresh_token": {
            "type": "string",
            "title": "Refresh Token",
            "description": "JWT refresh token"
          },
          "expires_in": {
            "type": "integer",
            "title": "Expires In",
            "description": "Access token expiration time in seconds"
          },
          "account": {
            "$ref": "#/components/schemas/AccountResponse",
            "description": "Account information"
          },
          "user": {
            "$ref": "#/components/schemas/snackbase__infrastructure__api__schemas__auth_schemas__UserResponse",
            "description": "User information"
          }
        },
        "type": "object",
        "required": ["token", "refresh_token", "expires_in", "account", "user"],
        "title": "AuthResponse",
        "description": "Response for successful authentication (login)."
      },
      "Body_acs_api_v1_auth_saml_acs_post": {
        "properties": {
          "SAMLResponse": {
            "type": "string",
            "title": "Samlresponse"
          },
          "RelayState": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Relaystate"
          }
        },
        "type": "object",
        "required": ["SAMLResponse"],
        "title": "Body_acs_api_v1_auth_saml_acs_post"
      },
      "Body_update_configuration_status_api_v1_admin_configuration__config_id__patch": {
        "properties": {
          "enabled": {
            "type": "boolean",
            "title": "Enabled"
          }
        },
        "type": "object",
        "required": ["enabled"],
        "title": "Body_update_configuration_status_api_v1_admin_configuration__config_id__patch"
      },
      "Body_upload_file_api_v1_files_upload_post": {
        "properties": {
          "file": {
            "type": "string",
            "format": "binary",
            "title": "File",
            "description": "File to upload"
          }
        },
        "type": "object",
        "required": ["file"],
        "title": "Body_upload_file_api_v1_files_upload_post"
      },
      "BulkPermissionUpdate": {
        "properties": {
          "collection": {
            "type": "string",
            "title": "Collection"
          },
          "operation": {
            "type": "string",
            "title": "Operation"
          },
          "rule": {
            "type": "string",
            "title": "Rule"
          },
          "fields": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "string"
              }
            ],
            "title": "Fields"
          }
        },
        "type": "object",
        "required": ["collection", "operation", "rule", "fields"],
        "title": "BulkPermissionUpdate",
        "description": "Schema for a single permission update in bulk operation.\n\nAttributes:\n    collection: Collection name.\n    operation: Operation type (create, read, update, delete).\n    rule: Rule expression.\n    fields: Fields allowed (list of field names or '*' for all)."
      },
      "BulkPermissionUpdateRequest": {
        "properties": {
          "updates": {
            "items": {
              "$ref": "#/components/schemas/BulkPermissionUpdate"
            },
            "type": "array",
            "title": "Updates"
          }
        },
        "type": "object",
        "required": ["updates"],
        "title": "BulkPermissionUpdateRequest",
        "description": "Request schema for bulk permission updates.\n\nAttributes:\n    updates: List of permission updates to apply."
      },
      "BulkPermissionUpdateResponse": {
        "properties": {
          "success_count": {
            "type": "integer",
            "title": "Success Count"
          },
          "failure_count": {
            "type": "integer",
            "title": "Failure Count"
          },
          "errors": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Errors"
          }
        },
        "type": "object",
        "required": ["success_count", "failure_count", "errors"],
        "title": "BulkPermissionUpdateResponse",
        "description": "Response schema for bulk permission updates.\n\nAttributes:\n    success_count: Number of successful updates.\n    failure_count: Number of failed updates.\n    errors: List of error messages for failed updates."
      },
      "CollectionListItem": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Collection ID (UUID)"
          },
          "name": {
            "type": "string",
            "title": "Name",
            "description": "Collection name"
          },
          "table_name": {
            "type": "string",
            "title": "Table Name",
            "description": "Physical table name in database"
          },
          "fields_count": {
            "type": "integer",
            "title": "Fields Count",
            "description": "Number of fields in the schema"
          },
          "records_count": {
            "type": "integer",
            "title": "Records Count",
            "description": "Number of records in the collection",
            "default": 0
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "When the collection was created"
          }
        },
        "type": "object",
        "required": ["id", "name", "table_name", "fields_count", "created_at"],
        "title": "CollectionListItem",
        "description": "Collection item for list view."
      },
      "CollectionListResponse": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/CollectionListItem"
            },
            "type": "array",
            "title": "Items",
            "description": "List of collections"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Total number of collections"
          },
          "page": {
            "type": "integer",
            "title": "Page",
            "description": "Current page number"
          },
          "page_size": {
            "type": "integer",
            "title": "Page Size",
            "description": "Number of items per page"
          },
          "total_pages": {
            "type": "integer",
            "title": "Total Pages",
            "description": "Total number of pages"
          }
        },
        "type": "object",
        "required": ["items", "total", "page", "page_size", "total_pages"],
        "title": "CollectionListResponse",
        "description": "Paginated list of collections."
      },
      "CollectionPermission": {
        "properties": {
          "collection": {
            "type": "string",
            "title": "Collection"
          },
          "permission_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Permission Id"
          },
          "create": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Create"
          },
          "read": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Read"
          },
          "update": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Update"
          },
          "delete": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Delete"
          }
        },
        "type": "object",
        "required": ["collection"],
        "title": "CollectionPermission",
        "description": "Permission for a single collection.\n\nAttributes:\n    collection: Collection name.\n    permission_id: Permission ID (if exists).\n    create: Create operation rule.\n    read: Read operation rule.\n    update: Update operation rule.\n    delete: Delete operation rule."
      },
      "CollectionResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Collection ID (UUID)"
          },
          "name": {
            "type": "string",
            "title": "Name",
            "description": "Collection name"
          },
          "table_name": {
            "type": "string",
            "title": "Table Name",
            "description": "Physical table name in database"
          },
          "schema": {
            "items": {
              "$ref": "#/components/schemas/SchemaFieldResponse"
            },
            "type": "array",
            "title": "Schema",
            "description": "Collection schema"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "When the collection was created"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At",
            "description": "When the collection was last updated"
          }
        },
        "type": "object",
        "required": [
          "id",
          "name",
          "table_name",
          "schema",
          "created_at",
          "updated_at"
        ],
        "title": "CollectionResponse",
        "description": "Response for a created collection."
      },
      "CreateAccountRequest": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 255,
            "minLength": 1,
            "title": "Name",
            "description": "Account name"
          },
          "slug": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 32,
                "minLength": 3,
                "pattern": "^[a-z0-9-]+$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Slug",
            "description": "URL-friendly identifier (auto-generated if not provided)"
          }
        },
        "type": "object",
        "required": ["name"],
        "title": "CreateAccountRequest",
        "description": "Request body for creating a new account."
      },
      "CreateCollectionRequest": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 64,
            "minLength": 3,
            "title": "Name",
            "description": "Collection name (3-64 chars, alphanumeric + underscores)"
          },
          "schema": {
            "items": {
              "$ref": "#/components/schemas/FieldDefinition"
            },
            "type": "array",
            "minItems": 1,
            "title": "Schema",
            "description": "List of field definitions (at least one required)"
          }
        },
        "type": "object",
        "required": ["name", "schema"],
        "title": "CreateCollectionRequest",
        "description": "Request body for creating a new collection."
      },
      "CreatePermissionRequest": {
        "properties": {
          "role_id": {
            "type": "integer",
            "title": "Role Id"
          },
          "collection": {
            "type": "string",
            "title": "Collection"
          },
          "rules": {
            "$ref": "#/components/schemas/PermissionRulesSchema"
          }
        },
        "type": "object",
        "required": ["role_id", "collection", "rules"],
        "title": "CreatePermissionRequest",
        "description": "Request schema for creating a permission.\n\nAttributes:\n    role_id: ID of the role this permission applies to.\n    collection: Collection name (* for all collections).\n    rules: CRUD operation rules."
      },
      "CreateRoleRequest": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          }
        },
        "type": "object",
        "required": ["name"],
        "title": "CreateRoleRequest",
        "description": "Request schema for creating a role.\n\nAttributes:\n    name: Role name (e.g., 'editor', 'viewer').\n    description: Optional description of the role's purpose."
      },
      "CurrentRevisionResponse": {
        "properties": {
          "revision": {
            "type": "string",
            "title": "Revision",
            "description": "Current revision identifier"
          },
          "description": {
            "type": "string",
            "title": "Description",
            "description": "Migration description"
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At",
            "description": "Creation timestamp (ISO format)"
          }
        },
        "type": "object",
        "required": ["revision", "description"],
        "title": "CurrentRevisionResponse",
        "description": "Response schema for current database revision."
      },
      "DashboardStats": {
        "properties": {
          "total_accounts": {
            "type": "integer",
            "title": "Total Accounts"
          },
          "total_users": {
            "type": "integer",
            "title": "Total Users"
          },
          "total_collections": {
            "type": "integer",
            "title": "Total Collections"
          },
          "total_records": {
            "type": "integer",
            "title": "Total Records"
          },
          "new_accounts_7d": {
            "type": "integer",
            "title": "New Accounts 7D"
          },
          "new_users_7d": {
            "type": "integer",
            "title": "New Users 7D"
          },
          "recent_registrations": {
            "items": {
              "$ref": "#/components/schemas/RecentRegistration"
            },
            "type": "array",
            "title": "Recent Registrations"
          },
          "system_health": {
            "$ref": "#/components/schemas/SystemHealthStats"
          },
          "active_sessions": {
            "type": "integer",
            "title": "Active Sessions"
          },
          "recent_audit_logs": {
            "items": {
              "$ref": "#/components/schemas/AuditLogResponse"
            },
            "type": "array",
            "title": "Recent Audit Logs"
          }
        },
        "type": "object",
        "required": [
          "total_accounts",
          "total_users",
          "total_collections",
          "total_records",
          "new_accounts_7d",
          "new_users_7d",
          "recent_registrations",
          "system_health",
          "active_sessions",
          "recent_audit_logs"
        ],
        "title": "DashboardStats",
        "description": "Dashboard statistics response."
      },
      "EmailLogListResponse": {
        "properties": {
          "logs": {
            "items": {
              "$ref": "#/components/schemas/EmailLogResponse"
            },
            "type": "array",
            "title": "Logs"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "page": {
            "type": "integer",
            "title": "Page"
          },
          "page_size": {
            "type": "integer",
            "title": "Page Size"
          }
        },
        "type": "object",
        "required": ["logs", "total", "page", "page_size"],
        "title": "EmailLogListResponse",
        "description": "Response schema for paginated email log list.\n\nAttributes:\n    logs: List of email logs.\n    total: Total number of logs matching the filters.\n    page: Current page number.\n    page_size: Number of logs per page."
      },
      "EmailLogResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "account_id": {
            "type": "string",
            "title": "Account Id"
          },
          "template_type": {
            "type": "string",
            "title": "Template Type"
          },
          "recipient_email": {
            "type": "string",
            "title": "Recipient Email"
          },
          "provider": {
            "type": "string",
            "title": "Provider"
          },
          "status": {
            "type": "string",
            "title": "Status"
          },
          "error_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Message"
          },
          "variables": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "string"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Variables"
          },
          "sent_at": {
            "type": "string",
            "format": "date-time",
            "title": "Sent At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "account_id",
          "template_type",
          "recipient_email",
          "provider",
          "status",
          "sent_at"
        ],
        "title": "EmailLogResponse",
        "description": "Response schema for email log data.\n\nAttributes:\n    id: Log ID (UUID string).\n    account_id: Account ID this log belongs to.\n    template_type: Template type used (e.g., 'email_verification').\n    recipient_email: Email address of the recipient.\n    provider: Email provider used (e.g., 'smtp', 'ses', 'resend').\n    status: Delivery status ('sent', 'failed', 'pending').\n    error_message: Error message if status is 'failed' (nullable).\n    variables: Template variables used for rendering (nullable).\n    sent_at: Timestamp when the email was sent or attempted."
      },
      "EmailTemplateRenderRequest": {
        "properties": {
          "template_type": {
            "type": "string",
            "title": "Template Type"
          },
          "variables": {
            "additionalProperties": {
              "type": "string"
            },
            "type": "object",
            "title": "Variables"
          },
          "locale": {
            "type": "string",
            "title": "Locale",
            "default": "en"
          },
          "account_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Account Id"
          },
          "subject": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Subject"
          },
          "html_body": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Html Body"
          },
          "text_body": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Text Body"
          }
        },
        "type": "object",
        "required": ["template_type", "variables"],
        "title": "EmailTemplateRenderRequest",
        "description": "Request schema for rendering a template without sending.\n\nAttributes:\n    template_type: Template type to render (e.g., 'email_verification').\n    variables: Dictionary of variables for template rendering.\n    locale: Optional language/locale code (default: 'en').\n    account_id: Optional account ID for template lookup."
      },
      "EmailTemplateRenderResponse": {
        "properties": {
          "subject": {
            "type": "string",
            "title": "Subject"
          },
          "html_body": {
            "type": "string",
            "title": "Html Body"
          },
          "text_body": {
            "type": "string",
            "title": "Text Body"
          }
        },
        "type": "object",
        "required": ["subject", "html_body", "text_body"],
        "title": "EmailTemplateRenderResponse",
        "description": "Response schema for rendered template content.\n\nAttributes:\n    subject: Rendered subject line.\n    html_body: Rendered HTML body.\n    text_body: Rendered plain text body."
      },
      "EmailTemplateResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "account_id": {
            "type": "string",
            "title": "Account Id"
          },
          "template_type": {
            "type": "string",
            "title": "Template Type"
          },
          "locale": {
            "type": "string",
            "title": "Locale"
          },
          "subject": {
            "type": "string",
            "title": "Subject"
          },
          "html_body": {
            "type": "string",
            "title": "Html Body"
          },
          "text_body": {
            "type": "string",
            "title": "Text Body"
          },
          "enabled": {
            "type": "boolean",
            "title": "Enabled"
          },
          "is_builtin": {
            "type": "boolean",
            "title": "Is Builtin"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "account_id",
          "template_type",
          "locale",
          "subject",
          "html_body",
          "text_body",
          "enabled",
          "is_builtin",
          "created_at",
          "updated_at"
        ],
        "title": "EmailTemplateResponse",
        "description": "Response schema for email template data.\n\nAttributes:\n    id: Template ID (UUID string).\n    account_id: Account ID this template belongs to.\n    template_type: Template type identifier (e.g., 'email_verification').\n    locale: Language/locale code (e.g., 'en', 'es').\n    subject: Email subject line with Jinja2 variables.\n    html_body: HTML email body with Jinja2 variables.\n    text_body: Plain text email body with Jinja2 variables.\n    enabled: Whether this template is active.\n    is_builtin: Whether this is a built-in system template.\n    created_at: Timestamp when the template was created.\n    updated_at: Timestamp when the template was last updated."
      },
      "EmailTemplateTestRequest": {
        "properties": {
          "recipient_email": {
            "type": "string",
            "format": "email",
            "title": "Recipient Email"
          },
          "variables": {
            "additionalProperties": {
              "type": "string"
            },
            "type": "object",
            "title": "Variables"
          },
          "provider": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Provider"
          }
        },
        "type": "object",
        "required": ["recipient_email"],
        "title": "EmailTemplateTestRequest",
        "description": "Request schema for sending a test email.\n\nAttributes:\n    recipient_email: Email address to send test email to.\n    variables: Optional dictionary of variables for template rendering."
      },
      "EmailTemplateUpdate": {
        "properties": {
          "subject": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Subject"
          },
          "html_body": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Html Body"
          },
          "text_body": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Text Body"
          },
          "enabled": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Enabled"
          }
        },
        "type": "object",
        "title": "EmailTemplateUpdate",
        "description": "Request schema for updating an email template.\n\nAttributes:\n    subject: Optional new subject line.\n    html_body: Optional new HTML body.\n    text_body: Optional new plain text body.\n    enabled: Optional new enabled status."
      },
      "FieldDefinition": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 64,
            "minLength": 1,
            "title": "Name",
            "description": "Field name (alphanumeric + underscores, starts with letter)"
          },
          "type": {
            "type": "string",
            "title": "Type",
            "description": "Field type: text, number, boolean, datetime, email, url, json, reference, file"
          },
          "required": {
            "type": "boolean",
            "title": "Required",
            "description": "Whether the field is required",
            "default": false
          },
          "default": {
            "title": "Default",
            "description": "Default value for the field"
          },
          "unique": {
            "type": "boolean",
            "title": "Unique",
            "description": "Whether the field value must be unique",
            "default": false
          },
          "options": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Options",
            "description": "Additional field options"
          },
          "collection": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Collection",
            "description": "Target collection name (required for reference type)"
          },
          "on_delete": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "On Delete",
            "description": "On delete action: cascade, set_null, restrict (required for reference type)"
          },
          "pii": {
            "type": "boolean",
            "title": "Pii",
            "description": "Whether this field contains PII data",
            "default": false
          },
          "mask_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mask Type",
            "description": "Mask type for PII fields: email, ssn, phone, name, full, custom"
          }
        },
        "type": "object",
        "required": ["name", "type"],
        "title": "FieldDefinition",
        "description": "Definition of a single field in a collection schema."
      },
      "FileMetadataResponse": {
        "properties": {
          "filename": {
            "type": "string",
            "title": "Filename",
            "description": "Original filename"
          },
          "size": {
            "type": "integer",
            "title": "Size",
            "description": "File size in bytes"
          },
          "mime_type": {
            "type": "string",
            "title": "Mime Type",
            "description": "MIME type of the file"
          },
          "path": {
            "type": "string",
            "title": "Path",
            "description": "Relative path to the file (account_id/uuid_filename)"
          }
        },
        "type": "object",
        "required": ["filename", "size", "mime_type", "path"],
        "title": "FileMetadataResponse",
        "description": "Response schema for file metadata."
      },
      "FileUploadResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Upload success status",
            "default": true
          },
          "file": {
            "$ref": "#/components/schemas/FileMetadataResponse",
            "description": "Uploaded file metadata"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Success message",
            "default": "File uploaded successfully"
          }
        },
        "type": "object",
        "required": ["file"],
        "title": "FileUploadResponse",
        "description": "Response schema for file upload."
      },
      "ForgotPasswordRequest": {
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email",
            "description": "User's email address"
          },
          "account": {
            "type": "string",
            "minLength": 1,
            "title": "Account",
            "description": "Account identifier (slug or ID in XX#### format)"
          }
        },
        "type": "object",
        "required": ["email", "account"],
        "title": "ForgotPasswordRequest",
        "description": "Request body for forgot password."
      },
      "ForgotPasswordResponse": {
        "properties": {
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Success message (always returned regardless of whether email exists)"
          }
        },
        "type": "object",
        "required": ["message"],
        "title": "ForgotPasswordResponse",
        "description": "Response for forgot password request."
      },
      "GroupCreate": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Name",
            "description": "Group name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 500
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Group description"
          },
          "account_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Account Id",
            "description": "Account ID (UUID, optional for superadmins)"
          }
        },
        "type": "object",
        "required": ["name"],
        "title": "GroupCreate",
        "description": "Schema for creating a group."
      },
      "GroupDetailResponse": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Name",
            "description": "Group name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 500
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Group description"
          },
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Group ID"
          },
          "account_id": {
            "type": "string",
            "title": "Account Id",
            "description": "Account ID (UUID)"
          },
          "account_code": {
            "type": "string",
            "title": "Account Code",
            "description": "Human-readable account code in XX#### format (e.g., AB1234)"
          },
          "member_count": {
            "type": "integer",
            "title": "Member Count",
            "description": "Number of users in the group",
            "default": 0
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          },
          "users": {
            "items": {
              "$ref": "#/components/schemas/snackbase__infrastructure__api__schemas__users_schemas__UserResponse"
            },
            "type": "array",
            "title": "Users",
            "description": "List of users in the group"
          }
        },
        "type": "object",
        "required": [
          "name",
          "id",
          "account_id",
          "account_code",
          "created_at",
          "updated_at"
        ],
        "title": "GroupDetailResponse",
        "description": "Schema for detailed group response including users."
      },
      "GroupResponse": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Name",
            "description": "Group name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 500
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Group description"
          },
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Group ID"
          },
          "account_id": {
            "type": "string",
            "title": "Account Id",
            "description": "Account ID (UUID)"
          },
          "account_code": {
            "type": "string",
            "title": "Account Code",
            "description": "Human-readable account code in XX#### format (e.g., AB1234)"
          },
          "member_count": {
            "type": "integer",
            "title": "Member Count",
            "description": "Number of users in the group",
            "default": 0
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "name",
          "id",
          "account_id",
          "account_code",
          "created_at",
          "updated_at"
        ],
        "title": "GroupResponse",
        "description": "Schema for group response."
      },
      "GroupUpdate": {
        "properties": {
          "name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Name",
            "description": "Group name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 500
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Group description"
          }
        },
        "type": "object",
        "title": "GroupUpdate",
        "description": "Schema for updating a group."
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "InvitationAcceptRequest": {
        "properties": {
          "password": {
            "type": "string",
            "minLength": 8,
            "title": "Password",
            "description": "Password for the new user account"
          }
        },
        "type": "object",
        "required": ["password"],
        "title": "InvitationAcceptRequest",
        "description": "Request schema for accepting an invitation."
      },
      "InvitationCreateRequest": {
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email",
            "description": "Email address of the user to invite"
          },
          "role_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Role Id",
            "description": "Optional role ID to assign to the user"
          },
          "groups": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Groups",
            "description": "Optional list of group IDs to add the user to"
          },
          "account_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Account Id",
            "description": "Optional account ID (Superadmin only)"
          }
        },
        "type": "object",
        "required": ["email"],
        "title": "InvitationCreateRequest",
        "description": "Request schema for creating an invitation."
      },
      "InvitationListResponse": {
        "properties": {
          "invitations": {
            "items": {
              "$ref": "#/components/schemas/InvitationResponse"
            },
            "type": "array",
            "title": "Invitations",
            "description": "List of invitations"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Total number of invitations"
          }
        },
        "type": "object",
        "required": ["invitations", "total"],
        "title": "InvitationListResponse",
        "description": "Response schema for listing invitations."
      },
      "InvitationPublicResponse": {
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email",
            "description": "Email address of the invited user"
          },
          "account_name": {
            "type": "string",
            "title": "Account Name",
            "description": "Name of the inviting account"
          },
          "invited_by_name": {
            "type": "string",
            "title": "Invited By Name",
            "description": "Name of the person who invited"
          },
          "expires_at": {
            "type": "string",
            "format": "date-time",
            "title": "Expires At",
            "description": "Expiration timestamp"
          },
          "is_valid": {
            "type": "boolean",
            "title": "Is Valid",
            "description": "Whether the invitation is valid",
            "default": true
          }
        },
        "type": "object",
        "required": ["email", "account_name", "invited_by_name", "expires_at"],
        "title": "InvitationPublicResponse",
        "description": "Response schema for public invitation details."
      },
      "InvitationResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Invitation ID"
          },
          "account_id": {
            "type": "string",
            "title": "Account Id",
            "description": "Account ID (UUID)"
          },
          "account_code": {
            "type": "string",
            "title": "Account Code",
            "description": "Human-readable account code in XX#### format (e.g., AB1234)"
          },
          "email": {
            "type": "string",
            "title": "Email",
            "description": "Email address of the invited user"
          },
          "invited_by": {
            "type": "string",
            "title": "Invited By",
            "description": "User ID of the inviter"
          },
          "expires_at": {
            "type": "string",
            "format": "date-time",
            "title": "Expires At",
            "description": "Expiration timestamp"
          },
          "accepted_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Accepted At",
            "description": "Acceptance timestamp (if accepted)"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "Creation timestamp"
          },
          "email_sent": {
            "type": "boolean",
            "title": "Email Sent",
            "description": "Whether the invitation email has been sent",
            "default": false
          },
          "email_sent_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Email Sent At",
            "description": "Timestamp when the email was sent"
          },
          "status": {
            "$ref": "#/components/schemas/InvitationStatus",
            "description": "Current invitation status"
          },
          "token": {
            "type": "string",
            "title": "Token",
            "description": "Invitation token for constructing acceptance URL"
          }
        },
        "type": "object",
        "required": [
          "id",
          "account_id",
          "account_code",
          "email",
          "invited_by",
          "expires_at",
          "created_at",
          "status",
          "token"
        ],
        "title": "InvitationResponse",
        "description": "Response schema for invitation details."
      },
      "InvitationStatus": {
        "type": "string",
        "enum": ["pending", "accepted", "expired", "cancelled"],
        "title": "InvitationStatus",
        "description": "Invitation status enum."
      },
      "LoginRequest": {
        "properties": {
          "account": {
            "type": "string",
            "minLength": 1,
            "title": "Account",
            "description": "Account identifier (slug or ID in XX#### format)"
          },
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email",
            "description": "User's email address"
          },
          "password": {
            "type": "string",
            "minLength": 1,
            "title": "Password",
            "description": "User's password"
          }
        },
        "type": "object",
        "required": ["account", "email", "password"],
        "title": "LoginRequest",
        "description": "Request body for user login."
      },
      "MacroCreate": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 255,
            "minLength": 1,
            "title": "Name",
            "description": "Unique name of the macro"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Description of the macro"
          },
          "sql_query": {
            "type": "string",
            "title": "Sql Query",
            "description": "The SQL SELECT query"
          },
          "parameters": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Parameters",
            "description": "List of parameter names"
          }
        },
        "type": "object",
        "required": ["name", "sql_query"],
        "title": "MacroCreate",
        "description": "Schema for creating a macro."
      },
      "MacroResponse": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 255,
            "minLength": 1,
            "title": "Name",
            "description": "Unique name of the macro"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Description of the macro"
          },
          "sql_query": {
            "type": "string",
            "title": "Sql Query",
            "description": "The SQL SELECT query"
          },
          "parameters": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Parameters",
            "description": "List of parameter names"
          },
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          },
          "created_by": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created By"
          }
        },
        "type": "object",
        "required": ["name", "sql_query", "id", "created_at", "updated_at"],
        "title": "MacroResponse",
        "description": "Schema for macro response."
      },
      "MacroTestRequest": {
        "properties": {
          "parameters": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Parameters",
            "description": "Array of test values to pass to the macro"
          }
        },
        "type": "object",
        "title": "MacroTestRequest",
        "description": "Schema for testing a macro."
      },
      "MacroTestResponse": {
        "properties": {
          "result": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Result",
            "description": "The result of the macro execution"
          },
          "execution_time": {
            "type": "number",
            "title": "Execution Time",
            "description": "Execution time in milliseconds"
          },
          "rows_affected": {
            "type": "integer",
            "title": "Rows Affected",
            "description": "Number of rows affected (always 0 for SELECT)",
            "default": 0
          }
        },
        "type": "object",
        "required": ["execution_time"],
        "title": "MacroTestResponse",
        "description": "Schema for macro test response."
      },
      "MacroUpdate": {
        "properties": {
          "name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 255,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Name",
            "description": "Unique name of the macro"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Description of the macro"
          },
          "sql_query": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sql Query",
            "description": "The SQL SELECT query"
          },
          "parameters": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Parameters",
            "description": "List of parameter names"
          }
        },
        "type": "object",
        "title": "MacroUpdate",
        "description": "Schema for updating a macro."
      },
      "MigrationHistoryItemResponse": {
        "properties": {
          "revision": {
            "type": "string",
            "title": "Revision",
            "description": "Unique revision identifier"
          },
          "description": {
            "type": "string",
            "title": "Description",
            "description": "Migration description"
          },
          "is_dynamic": {
            "type": "boolean",
            "title": "Is Dynamic",
            "description": "Whether this is a dynamic (auto-generated) migration"
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At",
            "description": "Creation timestamp (ISO format)"
          }
        },
        "type": "object",
        "required": ["revision", "description", "is_dynamic"],
        "title": "MigrationHistoryItemResponse",
        "description": "Response schema for a single item in migration history."
      },
      "MigrationHistoryResponse": {
        "properties": {
          "history": {
            "items": {
              "$ref": "#/components/schemas/MigrationHistoryItemResponse"
            },
            "type": "array",
            "title": "History",
            "description": "List of applied migrations in chronological order"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Total number of applied migrations"
          }
        },
        "type": "object",
        "required": ["history", "total"],
        "title": "MigrationHistoryResponse",
        "description": "Response schema for migration history."
      },
      "MigrationListResponse": {
        "properties": {
          "revisions": {
            "items": {
              "$ref": "#/components/schemas/MigrationRevisionResponse"
            },
            "type": "array",
            "title": "Revisions",
            "description": "List of all revisions"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Total number of revisions"
          },
          "current_revision": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Current Revision",
            "description": "Current database revision"
          }
        },
        "type": "object",
        "required": ["revisions", "total"],
        "title": "MigrationListResponse",
        "description": "Response schema for listing all migrations."
      },
      "MigrationRevisionResponse": {
        "properties": {
          "revision": {
            "type": "string",
            "title": "Revision",
            "description": "Unique revision identifier"
          },
          "description": {
            "type": "string",
            "title": "Description",
            "description": "Migration description"
          },
          "down_revision": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Down Revision",
            "description": "Previous revision in the chain"
          },
          "branch_labels": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Branch Labels",
            "description": "Branch labels for this revision"
          },
          "is_applied": {
            "type": "boolean",
            "title": "Is Applied",
            "description": "Whether this revision is applied"
          },
          "is_head": {
            "type": "boolean",
            "title": "Is Head",
            "description": "Whether this is the head revision"
          },
          "is_dynamic": {
            "type": "boolean",
            "title": "Is Dynamic",
            "description": "Whether this is a dynamic (auto-generated) migration"
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At",
            "description": "Creation timestamp (ISO format)"
          }
        },
        "type": "object",
        "required": [
          "revision",
          "description",
          "is_applied",
          "is_head",
          "is_dynamic"
        ],
        "title": "MigrationRevisionResponse",
        "description": "Response schema for a single migration revision."
      },
      "OAuthAuthorizeRequest": {
        "properties": {
          "account": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Account",
            "description": "Account identifier (slug or ID)"
          },
          "account_name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 255,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Account Name",
            "description": "Display name for the new account (used when creating a new account)"
          },
          "redirect_uri": {
            "type": "string",
            "title": "Redirect Uri",
            "description": "URI to redirect to after OAuth completion"
          },
          "state": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "State",
            "description": "Optional state for CSRF (auto-generated if missing)"
          }
        },
        "type": "object",
        "required": ["redirect_uri"],
        "title": "OAuthAuthorizeRequest",
        "description": "Request body for starting an OAuth flow."
      },
      "OAuthAuthorizeResponse": {
        "properties": {
          "authorization_url": {
            "type": "string",
            "title": "Authorization Url",
            "description": "URL to redirect the user to"
          },
          "state": {
            "type": "string",
            "title": "State",
            "description": "The state token used for this flow"
          },
          "provider": {
            "type": "string",
            "title": "Provider",
            "description": "The provider name"
          }
        },
        "type": "object",
        "required": ["authorization_url", "state", "provider"],
        "title": "OAuthAuthorizeResponse",
        "description": "Response for OAuth authorization initiation."
      },
      "OAuthCallbackRequest": {
        "properties": {
          "code": {
            "type": "string",
            "title": "Code",
            "description": "Authorization code from provider"
          },
          "state": {
            "type": "string",
            "title": "State",
            "description": "State token for CSRF protection"
          },
          "redirect_uri": {
            "type": "string",
            "title": "Redirect Uri",
            "description": "Original redirect URI used in authorize request"
          }
        },
        "type": "object",
        "required": ["code", "state", "redirect_uri"],
        "title": "OAuthCallbackRequest",
        "description": "Request body for OAuth callback completion."
      },
      "OAuthCallbackResponse": {
        "properties": {
          "token": {
            "type": "string",
            "title": "Token",
            "description": "JWT access token"
          },
          "refresh_token": {
            "type": "string",
            "title": "Refresh Token",
            "description": "JWT refresh token"
          },
          "expires_in": {
            "type": "integer",
            "title": "Expires In",
            "description": "Access token expiration time in seconds"
          },
          "account": {
            "$ref": "#/components/schemas/AccountResponse",
            "description": "Account information"
          },
          "user": {
            "$ref": "#/components/schemas/snackbase__infrastructure__api__schemas__auth_schemas__UserResponse",
            "description": "User information"
          },
          "is_new_user": {
            "type": "boolean",
            "title": "Is New User",
            "description": "Whether a new user was created"
          },
          "is_new_account": {
            "type": "boolean",
            "title": "Is New Account",
            "description": "Whether a new account was created"
          }
        },
        "type": "object",
        "required": [
          "token",
          "refresh_token",
          "expires_in",
          "account",
          "user",
          "is_new_user",
          "is_new_account"
        ],
        "title": "OAuthCallbackResponse",
        "description": "Response for successful OAuth callback authentication."
      },
      "OperationRuleSchema": {
        "properties": {
          "rule": {
            "type": "string",
            "title": "Rule"
          },
          "fields": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "string"
              }
            ],
            "title": "Fields",
            "default": "*"
          }
        },
        "type": "object",
        "required": ["rule"],
        "title": "OperationRuleSchema",
        "description": "Schema for a single CRUD operation rule.\n\nAttributes:\n    rule: Expression string (e.g., \"true\", \"user.id == record.owner_id\").\n    fields: List of allowed fields or \"*\" for all fields."
      },
      "PasswordResetRequest": {
        "properties": {
          "new_password": {
            "anyOf": [
              {
                "type": "string",
                "minLength": 1,
                "format": "password",
                "writeOnly": true
              },
              {
                "type": "null"
              }
            ],
            "title": "New Password",
            "description": "New password"
          },
          "send_reset_link": {
            "type": "boolean",
            "title": "Send Reset Link",
            "description": "Whether to send a password reset link instead of setting password directly",
            "default": false
          }
        },
        "type": "object",
        "title": "PasswordResetRequest",
        "description": "Request schema for resetting a user's password.\n\nUsed by superadmins to reset user passwords."
      },
      "PermissionListResponse": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/PermissionResponse"
            },
            "type": "array",
            "title": "Items"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          }
        },
        "type": "object",
        "required": ["items", "total"],
        "title": "PermissionListResponse",
        "description": "Response schema for listing permissions.\n\nAttributes:\n    items: List of permissions.\n    total: Total number of permissions."
      },
      "PermissionResponse": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "role_id": {
            "type": "integer",
            "title": "Role Id"
          },
          "collection": {
            "type": "string",
            "title": "Collection"
          },
          "rules": {
            "$ref": "#/components/schemas/PermissionRulesSchema"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "role_id",
          "collection",
          "rules",
          "created_at",
          "updated_at"
        ],
        "title": "PermissionResponse",
        "description": "Response schema for a permission.\n\nAttributes:\n    id: Permission ID.\n    role_id: Role ID this permission applies to.\n    collection: Collection name.\n    rules: CRUD operation rules.\n    created_at: Timestamp when created.\n    updated_at: Timestamp when last updated."
      },
      "PermissionRulesSchema": {
        "properties": {
          "create": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/OperationRuleSchema"
              },
              {
                "type": "null"
              }
            ]
          },
          "read": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/OperationRuleSchema"
              },
              {
                "type": "null"
              }
            ]
          },
          "update": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/OperationRuleSchema"
              },
              {
                "type": "null"
              }
            ]
          },
          "delete": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/OperationRuleSchema"
              },
              {
                "type": "null"
              }
            ]
          }
        },
        "type": "object",
        "title": "PermissionRulesSchema",
        "description": "Schema for CRUD operation rules.\n\nEach operation is optional - if None, that operation is not permitted.\n\nAttributes:\n    create: Rule for create operations.\n    read: Rule for read operations.\n    update: Rule for update operations.\n    delete: Rule for delete operations."
      },
      "RecentRegistration": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "email": {
            "type": "string",
            "title": "Email"
          },
          "account_id": {
            "type": "string",
            "title": "Account Id",
            "description": "Account ID (UUID)"
          },
          "account_code": {
            "type": "string",
            "title": "Account Code",
            "description": "Human-readable account code in XX#### format (e.g., AB1234)"
          },
          "account_name": {
            "type": "string",
            "title": "Account Name"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "email",
          "account_id",
          "account_code",
          "account_name",
          "created_at"
        ],
        "title": "RecentRegistration",
        "description": "Recent user registration information."
      },
      "RecordListResponse": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/RecordResponse"
            },
            "type": "array",
            "title": "Items",
            "description": "List of records"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Total number of records matching filter"
          },
          "skip": {
            "type": "integer",
            "title": "Skip",
            "description": "Number of records skipped"
          },
          "limit": {
            "type": "integer",
            "title": "Limit",
            "description": "Number of records returned"
          }
        },
        "type": "object",
        "required": ["items", "total", "skip", "limit"],
        "title": "RecordListResponse",
        "description": "Response for listing records."
      },
      "RecordResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Record ID (UUID)"
          },
          "account_id": {
            "type": "string",
            "title": "Account Id",
            "description": "Account ID the record belongs to"
          },
          "created_at": {
            "type": "string",
            "title": "Created At",
            "description": "ISO 8601 timestamp when record was created"
          },
          "created_by": {
            "type": "string",
            "title": "Created By",
            "description": "User ID who created the record"
          },
          "updated_at": {
            "type": "string",
            "title": "Updated At",
            "description": "ISO 8601 timestamp when record was last updated"
          },
          "updated_by": {
            "type": "string",
            "title": "Updated By",
            "description": "User ID who last updated the record"
          },
          "account_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Account Name",
            "description": "Display name for the account (optional)"
          }
        },
        "additionalProperties": true,
        "type": "object",
        "required": [
          "id",
          "account_id",
          "created_at",
          "created_by",
          "updated_at",
          "updated_by"
        ],
        "title": "RecordResponse",
        "description": "Response for a created or retrieved record.\n\nContains all system fields plus user-defined fields."
      },
      "RecordValidationErrorDetail": {
        "properties": {
          "field": {
            "type": "string",
            "title": "Field",
            "description": "Field that failed validation"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Human-readable error message"
          },
          "code": {
            "type": "string",
            "title": "Code",
            "description": "Machine-readable error code"
          }
        },
        "type": "object",
        "required": ["field", "message", "code"],
        "title": "RecordValidationErrorDetail",
        "description": "A single record validation error."
      },
      "RecordValidationErrorResponse": {
        "properties": {
          "error": {
            "type": "string",
            "title": "Error",
            "description": "Error type",
            "default": "Validation error"
          },
          "details": {
            "items": {
              "$ref": "#/components/schemas/RecordValidationErrorDetail"
            },
            "type": "array",
            "title": "Details",
            "description": "List of validation errors"
          }
        },
        "type": "object",
        "required": ["details"],
        "title": "RecordValidationErrorResponse",
        "description": "Response for record validation errors."
      },
      "RefreshRequest": {
        "properties": {
          "refresh_token": {
            "type": "string",
            "minLength": 1,
            "title": "Refresh Token",
            "description": "JWT refresh token"
          }
        },
        "type": "object",
        "required": ["refresh_token"],
        "title": "RefreshRequest",
        "description": "Request body for token refresh."
      },
      "RegisterRequest": {
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email",
            "description": "User's email address"
          },
          "password": {
            "type": "string",
            "minLength": 1,
            "title": "Password",
            "description": "User's password"
          },
          "account_name": {
            "type": "string",
            "maxLength": 255,
            "minLength": 1,
            "title": "Account Name",
            "description": "Display name for the account"
          },
          "account_slug": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 32,
                "minLength": 3
              },
              {
                "type": "null"
              }
            ],
            "title": "Account Slug",
            "description": "URL-friendly account identifier (auto-generated if not provided)"
          }
        },
        "type": "object",
        "required": ["email", "password", "account_name"],
        "title": "RegisterRequest",
        "description": "Request body for account registration."
      },
      "RegistrationResponse": {
        "properties": {
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Success message instructing to verify email"
          },
          "user": {
            "$ref": "#/components/schemas/snackbase__infrastructure__api__schemas__auth_schemas__UserResponse",
            "description": "User information"
          },
          "account": {
            "$ref": "#/components/schemas/AccountResponse",
            "description": "Account information"
          }
        },
        "type": "object",
        "required": ["message", "user", "account"],
        "title": "RegistrationResponse",
        "description": "Response for successful registration (verification required)."
      },
      "ResetPasswordRequest": {
        "properties": {
          "token": {
            "type": "string",
            "title": "Token",
            "description": "Password reset token"
          },
          "new_password": {
            "type": "string",
            "minLength": 8,
            "title": "New Password",
            "description": "New password (min 8 characters)"
          }
        },
        "type": "object",
        "required": ["token", "new_password"],
        "title": "ResetPasswordRequest",
        "description": "Request body for reset password."
      },
      "ResetPasswordResponse": {
        "properties": {
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Success message"
          }
        },
        "type": "object",
        "required": ["message"],
        "title": "ResetPasswordResponse",
        "description": "Response for successful password reset."
      },
      "RoleListItem": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "name": {
            "type": "string",
            "title": "Name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "collections_count": {
            "type": "integer",
            "title": "Collections Count"
          }
        },
        "type": "object",
        "required": ["id", "name", "collections_count"],
        "title": "RoleListItem",
        "description": "List item schema for a role.\n\nAttributes:\n    id: Role ID.\n    name: Role name.\n    description: Role description.\n    collections_count: Number of collections this role has permissions for."
      },
      "RoleListResponse": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/RoleListItem"
            },
            "type": "array",
            "title": "Items"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          }
        },
        "type": "object",
        "required": ["items", "total"],
        "title": "RoleListResponse",
        "description": "Response schema for listing roles.\n\nAttributes:\n    items: List of roles.\n    total: Total number of roles."
      },
      "RolePermissionsResponse": {
        "properties": {
          "role_id": {
            "type": "integer",
            "title": "Role Id"
          },
          "role_name": {
            "type": "string",
            "title": "Role Name"
          },
          "permissions": {
            "items": {
              "$ref": "#/components/schemas/CollectionPermission"
            },
            "type": "array",
            "title": "Permissions"
          }
        },
        "type": "object",
        "required": ["role_id", "role_name", "permissions"],
        "title": "RolePermissionsResponse",
        "description": "Response schema for role permissions.\n\nAttributes:\n    role_id: Role ID.\n    role_name: Role name.\n    permissions: List of permissions organized by collection."
      },
      "RoleResponse": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "name": {
            "type": "string",
            "title": "Name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          }
        },
        "type": "object",
        "required": ["id", "name"],
        "title": "RoleResponse",
        "description": "Response schema for a role.\n\nAttributes:\n    id: Role ID.\n    name: Role name.\n    description: Role description."
      },
      "SchemaFieldResponse": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name"
          },
          "type": {
            "type": "string",
            "title": "Type"
          },
          "required": {
            "type": "boolean",
            "title": "Required",
            "default": false
          },
          "default": {
            "title": "Default"
          },
          "unique": {
            "type": "boolean",
            "title": "Unique",
            "default": false
          },
          "options": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Options"
          },
          "collection": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Collection"
          },
          "on_delete": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "On Delete"
          },
          "pii": {
            "type": "boolean",
            "title": "Pii",
            "default": false
          },
          "mask_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mask Type"
          }
        },
        "type": "object",
        "required": ["name", "type"],
        "title": "SchemaFieldResponse",
        "description": "Schema field in collection response."
      },
      "SendVerificationRequest": {
        "properties": {
          "email": {
            "anyOf": [
              {
                "type": "string",
                "format": "email"
              },
              {
                "type": "null"
              }
            ],
            "title": "Email",
            "description": "User's email address. If not provided, the authenticated user's email is used."
          }
        },
        "type": "object",
        "title": "SendVerificationRequest",
        "description": "Request body for sending verification email."
      },
      "SystemHealthStats": {
        "properties": {
          "database_status": {
            "type": "string",
            "title": "Database Status"
          },
          "storage_usage_mb": {
            "type": "number",
            "title": "Storage Usage Mb"
          }
        },
        "type": "object",
        "required": ["database_status", "storage_usage_mb"],
        "title": "SystemHealthStats",
        "description": "System health statistics."
      },
      "TestRuleRequest": {
        "properties": {
          "rule": {
            "type": "string",
            "title": "Rule"
          },
          "context": {
            "additionalProperties": true,
            "type": "object",
            "title": "Context"
          }
        },
        "type": "object",
        "required": ["rule", "context"],
        "title": "TestRuleRequest",
        "description": "Request schema for testing a permission rule.\n\nAttributes:\n    rule: Rule expression to test.\n    context: Sample context data for testing."
      },
      "TestRuleResponse": {
        "properties": {
          "allowed": {
            "type": "boolean",
            "title": "Allowed"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          },
          "evaluation_details": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Evaluation Details"
          }
        },
        "type": "object",
        "required": ["allowed"],
        "title": "TestRuleResponse",
        "description": "Response schema for rule testing.\n\nAttributes:\n    allowed: Whether access would be granted.\n    error: Error message if evaluation failed.\n    evaluation_details: Details about the evaluation."
      },
      "TokenRefreshResponse": {
        "properties": {
          "token": {
            "type": "string",
            "title": "Token",
            "description": "New JWT access token"
          },
          "refresh_token": {
            "type": "string",
            "title": "Refresh Token",
            "description": "New JWT refresh token"
          },
          "expires_in": {
            "type": "integer",
            "title": "Expires In",
            "description": "Access token expiration time in seconds"
          }
        },
        "type": "object",
        "required": ["token", "refresh_token", "expires_in"],
        "title": "TokenRefreshResponse",
        "description": "Response for successful token refresh."
      },
      "UpdateAccountRequest": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 255,
            "minLength": 1,
            "title": "Name",
            "description": "Account name"
          }
        },
        "type": "object",
        "required": ["name"],
        "title": "UpdateAccountRequest",
        "description": "Request body for updating an account."
      },
      "UpdateCollectionRequest": {
        "properties": {
          "schema": {
            "items": {
              "$ref": "#/components/schemas/FieldDefinition"
            },
            "type": "array",
            "minItems": 1,
            "title": "Schema",
            "description": "Updated list of field definitions (at least one required)"
          }
        },
        "type": "object",
        "required": ["schema"],
        "title": "UpdateCollectionRequest",
        "description": "Request body for updating a collection schema."
      },
      "UpdateRoleRequest": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          }
        },
        "type": "object",
        "required": ["name"],
        "title": "UpdateRoleRequest",
        "description": "Request schema for updating a role.\n\nAttributes:\n    name: Role name.\n    description: Optional description of the role's purpose."
      },
      "UserCreateRequest": {
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email",
            "description": "User's email address"
          },
          "password": {
            "anyOf": [
              {
                "type": "string",
                "minLength": 1,
                "format": "password",
                "writeOnly": true
              },
              {
                "type": "null"
              }
            ],
            "title": "Password",
            "description": "User's password (optional for OAuth/SAML users)"
          },
          "account_id": {
            "type": "string",
            "maxLength": 36,
            "minLength": 36,
            "title": "Account Id",
            "description": "Account ID (UUID)"
          },
          "role_id": {
            "type": "integer",
            "minimum": 1,
            "title": "Role Id",
            "description": "Role ID (must exist)"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active",
            "description": "Whether the user can log in",
            "default": true
          },
          "auth_provider": {
            "type": "string",
            "title": "Auth Provider",
            "description": "Authentication provider type ('password', 'oauth', 'saml')",
            "default": "password"
          },
          "auth_provider_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Auth Provider Name",
            "description": "Specific provider name (e.g., 'google', 'github')"
          },
          "external_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "External Id",
            "description": "External provider's user ID"
          },
          "external_email": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "External Email",
            "description": "Email from external provider"
          },
          "profile_data": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Profile Data",
            "description": "Additional profile data from external provider"
          }
        },
        "type": "object",
        "required": ["email", "account_id", "role_id"],
        "title": "UserCreateRequest",
        "description": "Request schema for creating a new user.\n\nThis is used by superadmins to create users in any account.\nFor OAuth/SAML users, password is optional and will be auto-generated."
      },
      "UserGroupUpdate": {
        "properties": {
          "user_id": {
            "type": "string",
            "title": "User Id",
            "description": "User ID to add/remove"
          }
        },
        "type": "object",
        "required": ["user_id"],
        "title": "UserGroupUpdate",
        "description": "Schema for adding/removing users from a group."
      },
      "UserListItem": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "User ID"
          },
          "email": {
            "type": "string",
            "title": "Email",
            "description": "User's email address"
          },
          "account_id": {
            "type": "string",
            "title": "Account Id",
            "description": "Account ID (UUID)"
          },
          "account_code": {
            "type": "string",
            "title": "Account Code",
            "description": "Human-readable account code in XX#### format (e.g., AB1234)"
          },
          "account_name": {
            "type": "string",
            "title": "Account Name",
            "description": "Account display name"
          },
          "role_id": {
            "type": "integer",
            "title": "Role Id",
            "description": "Role ID"
          },
          "role_name": {
            "type": "string",
            "title": "Role Name",
            "description": "Role name"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active",
            "description": "Whether the user can log in"
          },
          "auth_provider": {
            "type": "string",
            "title": "Auth Provider",
            "description": "Authentication provider type ('password', 'oauth', 'saml')"
          },
          "auth_provider_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Auth Provider Name",
            "description": "Specific provider name (e.g., 'google', 'github')"
          },
          "external_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "External Id",
            "description": "External provider's user ID"
          },
          "external_email": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "External Email",
            "description": "Email from external provider"
          },
          "profile_data": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Profile Data",
            "description": "Additional profile data from external provider"
          },
          "email_verified": {
            "type": "boolean",
            "title": "Email Verified",
            "description": "Whether the user's email is verified"
          },
          "email_verified_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Email Verified At",
            "description": "When the email was verified"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "When the user was created"
          },
          "last_login": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Login",
            "description": "Last successful login"
          }
        },
        "type": "object",
        "required": [
          "id",
          "email",
          "account_id",
          "account_code",
          "account_name",
          "role_id",
          "role_name",
          "is_active",
          "auth_provider",
          "email_verified",
          "created_at"
        ],
        "title": "UserListItem",
        "description": "List item schema for a user.\n\nUsed in paginated list responses."
      },
      "UserListResponse": {
        "properties": {
          "total": {
            "type": "integer",
            "minimum": 0,
            "title": "Total",
            "description": "Total number of users"
          },
          "items": {
            "items": {
              "$ref": "#/components/schemas/UserListItem"
            },
            "type": "array",
            "title": "Items",
            "description": "List of users"
          }
        },
        "type": "object",
        "required": ["total", "items"],
        "title": "UserListResponse",
        "description": "Response schema for listing users with pagination.\n\nAttributes:\n    total: Total number of users matching the filter.\n    items: List of users for the current page."
      },
      "UserUpdateRequest": {
        "properties": {
          "email": {
            "anyOf": [
              {
                "type": "string",
                "format": "email"
              },
              {
                "type": "null"
              }
            ],
            "title": "Email",
            "description": "User's email address"
          },
          "role_id": {
            "anyOf": [
              {
                "type": "integer",
                "minimum": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Role Id",
            "description": "Role ID (must exist)"
          },
          "is_active": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Active",
            "description": "Whether the user can log in"
          },
          "auth_provider": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Auth Provider",
            "description": "Authentication provider type ('password', 'oauth', 'saml')"
          },
          "auth_provider_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Auth Provider Name",
            "description": "Specific provider name (e.g., 'google', 'github')"
          },
          "external_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "External Id",
            "description": "External provider's user ID"
          },
          "external_email": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "External Email",
            "description": "Email from external provider"
          },
          "profile_data": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Profile Data",
            "description": "Additional profile data from external provider"
          }
        },
        "type": "object",
        "title": "UserUpdateRequest",
        "description": "Request schema for updating a user.\n\nAll fields are optional. Only provided fields will be updated.\nNote: account_id and password cannot be changed via this endpoint."
      },
      "ValidateRuleRequest": {
        "properties": {
          "rule": {
            "type": "string",
            "title": "Rule"
          }
        },
        "type": "object",
        "required": ["rule"],
        "title": "ValidateRuleRequest",
        "description": "Request schema for validating a permission rule.\n\nAttributes:\n    rule: Rule expression to validate."
      },
      "ValidateRuleResponse": {
        "properties": {
          "valid": {
            "type": "boolean",
            "title": "Valid"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          },
          "position": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "integer"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Position"
          }
        },
        "type": "object",
        "required": ["valid"],
        "title": "ValidateRuleResponse",
        "description": "Response schema for rule validation.\n\nAttributes:\n    valid: Whether the rule is valid.\n    error: Error message if invalid.\n    position: Error position (line and column) if invalid."
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": ["loc", "msg", "type"],
        "title": "ValidationError"
      },
      "VerifyEmailRequest": {
        "properties": {
          "token": {
            "type": "string",
            "title": "Token",
            "description": "Verification token"
          }
        },
        "type": "object",
        "required": ["token"],
        "title": "VerifyEmailRequest",
        "description": "Request body for verifying email with token."
      },
      "VerifyResetTokenResponse": {
        "properties": {
          "valid": {
            "type": "boolean",
            "title": "Valid",
            "description": "Whether token is valid"
          },
          "expires_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Expires At",
            "description": "Token expiration time if valid"
          }
        },
        "type": "object",
        "required": ["valid"],
        "title": "VerifyResetTokenResponse",
        "description": "Response for reset token verification."
      },
      "snackbase__infrastructure__api__schemas__auth_schemas__UserResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "User ID"
          },
          "email": {
            "type": "string",
            "title": "Email",
            "description": "User's email address"
          },
          "role": {
            "type": "string",
            "title": "Role",
            "description": "User's role name"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active",
            "description": "Whether the user is active"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "When the user was created"
          }
        },
        "type": "object",
        "required": ["id", "email", "role", "is_active", "created_at"],
        "title": "UserResponse",
        "description": "User information in auth responses."
      },
      "snackbase__infrastructure__api__schemas__users_schemas__UserResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "User ID"
          },
          "email": {
            "type": "string",
            "title": "Email",
            "description": "User's email address"
          },
          "account_id": {
            "type": "string",
            "title": "Account Id",
            "description": "Account ID (UUID)"
          },
          "account_code": {
            "type": "string",
            "title": "Account Code",
            "description": "Human-readable account code in XX#### format (e.g., AB1234)"
          },
          "account_name": {
            "type": "string",
            "title": "Account Name",
            "description": "Account display name"
          },
          "role_id": {
            "type": "integer",
            "title": "Role Id",
            "description": "Role ID"
          },
          "role_name": {
            "type": "string",
            "title": "Role Name",
            "description": "Role name"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active",
            "description": "Whether the user can log in"
          },
          "auth_provider": {
            "type": "string",
            "title": "Auth Provider",
            "description": "Authentication provider type ('password', 'oauth', 'saml')"
          },
          "auth_provider_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Auth Provider Name",
            "description": "Specific provider name (e.g., 'google', 'github')"
          },
          "external_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "External Id",
            "description": "External provider's user ID"
          },
          "external_email": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "External Email",
            "description": "Email from external provider"
          },
          "profile_data": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Profile Data",
            "description": "Additional profile data from external provider"
          },
          "email_verified": {
            "type": "boolean",
            "title": "Email Verified",
            "description": "Whether the user's email is verified"
          },
          "email_verified_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Email Verified At",
            "description": "When the email was verified"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "When the user was created"
          },
          "last_login": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Login",
            "description": "Last successful login"
          }
        },
        "type": "object",
        "required": [
          "id",
          "email",
          "account_id",
          "account_code",
          "account_name",
          "role_id",
          "role_name",
          "is_active",
          "auth_provider",
          "email_verified",
          "created_at"
        ],
        "title": "UserResponse",
        "description": "Response schema for a single user.\n\nIncludes user details along with related account and role information."
      }
    }
  }
}
